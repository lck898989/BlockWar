{"version":3,"sources":["wechatForJava.js"],"names":["cc","Class","extends","Component","properties","waitServer","Node","clickAudio","url","AudioClip","default","onLoad","accessToken","openId","refshToken","fTokenTime","isTokenTime","active","screenAdapt","wxLoginSuccess","WechatLogin","audioEngine","play","jsb","reflection","callStaticMethod","GetAccessToken","code1","console","log","self","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","SendServer","msg","JSON","parse","access_token","openid","refresh_token","open","send","str","str1","msg1","find","getComponent","GetServerMsg","GetUserMsg","msg2","nameUser","nickname","headimgurl","pictureUser","SendUserInfo","stringify","RefreshToken","isRefsh","start","size","view","getFrameSize","size1","director","getWinSize","width","height","update","dt","loginState","code","Global","wechatSuccess"],"mappings":"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","file":"wechatForJava.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        waitServer : cc.Node,\r\n        clickAudio : {\r\n            url     : cc.AudioClip,\r\n            default : null,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        //初始化用code获取的accesstoken\r\n        this.accessToken=\"\";\r\n        //初始化用code获取的openid\r\n        this.openId=\"\";\r\n        //初始化用code获取的refeshtoken\r\n        this.refshToken=\"\";\r\n\r\n        //初始化accessToken计时器\r\n        this.fTokenTime=0;\r\n          //初始化accessToken计时开关\r\n        this.isTokenTime=false;\r\n        this.waitServer.active = false;\r\n        //    //初始化是否刷新refsh\r\n        //    this.isRefsh=false;\r\n\r\n        // this.is=false;\r\n        this.screenAdapt();\r\n        this.wxLoginSuccess = false;\r\n        \r\n    },\r\n   //微信登陆i\r\n   WechatLogin:function(){\r\n    cc.audioEngine.play(this.clickAudio,false,1);\r\n    jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\"wxLogin\",\"()V\");\r\n},\r\n   //通过code获取微信accesstoken\r\n   GetAccessToken:function(code1){\r\n    console.log(\"in getAccessToken code1 is \" + code1);\r\n    var url = \"https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx72f9006d0b1d9b7f&secret=fe9036e8fdb8bc990a318227d0e68a5e&code=\"+code1+\"&grant_type=authorization_code\";\r\n    // var str = \"shop=钻石\";\r\n    // var str=\"name=1&password=1\";\r\n    var  self=this;\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n            console.log(\"微信相应\");\r\n            var response = xhr.responseText;     \r\n            console.log(\"in getAccessToken response is \" + response);\r\n            self.SendServer(response);\r\n            var msg=JSON.parse(response);\r\n            self.accessToken=msg.access_token;\r\n            self.openId=msg.openid; \r\n            self.refshToken=msg.refresh_token;\r\n        }\r\n    };\r\n\r\n    //    xhr.send(\"name=100\"+\"&password=1\");\r\n    xhr.open(\"GET\", url, true);\r\n     xhr.send();\r\n   },\r\n   //将获取到的accesstoken信息发给服务器\r\n\r\n   SendServer:function(str){\r\n    var url = \"http://47.92.126.116/login\";\r\n    var str1=\"{\\\"tag\\\":\\\"wxLogin\\\",\\\"body\\\":\"+str+\"}\";\r\n    var xhr = new XMLHttpRequest();\r\n    var self = this;\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n            console.log(\"相应信息。。。\");\r\n             var response = xhr.responseText;\r\n             console.log(\"response is \" + response);\r\n            var msg1=JSON.parse(response);\r\n            cc.find(\"PebmanentNode\").getComponent(\"GetServer\").GetServerMsg(msg1);\r\n        }\r\n    };\r\n    console.log(\"发送信息到服务器\")\r\n    xhr.open(\"POST\", url);\r\n    xhr.send(str1);\r\n   },\r\n   //登陆成功后访问微信获取用户信息\r\n   GetUserMsg:function(){\r\n    var url = \"https://api.weixin.qq.com/sns/userinfo?access_token=\"+this.accessToken+\"&openid=\"+this.openId;\r\n    // var str = \"shop=钻石\";\r\n    // var str=\"name=1&password=1\";\r\n    var  self=this;\r\n    self.isTokenTime=true;\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n              var response = xhr.responseText;\r\n              cc.log(response);\r\n              var msg2=JSON.parse(response);\r\n             cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nameUser=msg2.nickname;\r\n             cc.log(msg2.headimgurl+\"\");\r\n            //  msg2.headimgurl=\"\";\r\n            //  if(msg2.headimgurl==\"\"||msg2.headimgurl==null||msg2.headimgurl==undefined)\r\n            //  {\r\n            //      cc.log(\"===================================\");\r\n                \r\n            //      cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser=\"http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%9B%BE%E7%89%87&hs=0&pn=7&spn=0&di=135898298690&pi=0&rn=1&tn=baiduimagedetail&is=0%2C0&ie=utf-8&oe=utf-8&cl=2&lm=-1&cs=2260926939%2C1550208231&os=2086677986%2C2932337668&simid=0%2C0&adpicid=0&lpn=0&ln=30&fr=ala&fm=&sme=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01690955496f930000019ae92f3a4e.jpg%402o.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bzv55s_z%26e3Bv54_z%26e3BvgAzdH3Fo56hAzdH3FZNTAaMzMy_z%26e3Bip4s%3FfotpviPw2j%3D5g&gsm=0&islist=&querylist=\";\r\n            //      self.SendUserInfo(JSON.stringify(msg2));\r\n            //  }\r\n            //  else\r\n            //  {\r\n            //     cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser=msg2.headimgurl;\r\n            //     self.SendUserInfo(JSON.stringify(msg2));\r\n            //  }\r\n             cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser=msg2.headimgurl;\r\n            //  //保存图片的texture2D到全局对象中\r\n            //  cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").userImage = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").getUserPicture(msg2.headimgurl);\r\n             self.SendUserInfo(JSON.stringify(msg2));\r\n        }\r\n    };\r\n    //    xhr.send(\"name=100\"+\"&password=1\");\r\n    xhr.open(\"GET\", url, true);\r\n     xhr.send();\r\n   },\r\n   //访问并新刷新accesstoken\r\n   RefreshToken:function(){\r\n     this.isRefsh=true;\r\n     var url = \"https://api.weixin.qq.com/sns/oauth2/refresh_token?appid=wx72f9006d0b1d9b7f&grant_type=refresh_token&refresh_token=\"+this.refshToken;\r\n    // var str = \"shop=钻石\";\r\n    // var str=\"name=1&password=1\";\r\n    var  self=this;\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange = function () {      \r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n            var response = xhr.responseText;\r\n            self.SendServer(response);\r\n           var msg=JSON.parse(response);\r\n           self.accessToken=msg.access_token;\r\n           self.openId=msg.openid; \r\n           self.refshToken=msg.refresh_token;\r\n        }\r\n    };\r\n    //    xhr.send(\"name=100\"+\"&password=1\");\r\n    xhr.open(\"GET\", url, true);\r\n     xhr.send();\r\n   },\r\n   //将获取到的用户信息发给服务器\r\n   SendUserInfo:function(str){\r\n    var url = \"http://47.92.126.116/UserMsg\";\r\n    var str1=\"{\\\"tag\\\":\\\"UserMsg\\\",\"+\"\\\"type\\\":1,\"+\"\\\"body\\\":\"+str+\"}\";\r\n    var xhr = new XMLHttpRequest();\r\n    var self = this;\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n             var response = xhr.responseText;  \r\n            var msg1=JSON.parse(response);\r\n            //接受服务器用户并判断是否为非法用户\r\n            cc.find(\"PebmanentNode\").getComponent(\"GetServer\").GetServerMsg(msg1);\r\n        }\r\n    };\r\n    xhr.open(\"POST\", url);\r\n    xhr.send(str1);\r\n   },\r\n    start () {\r\n    },\r\n    //屏幕适配\r\n    screenAdapt : function(){\r\n        var size = cc.view.getFrameSize();\r\n        var size1 = cc.director.getWinSize();\r\n\r\n        console.log(\"设计分辨率的宽是\",size1.width);\r\n        console.log(\"设计分辨率的高是\",size1.height);\r\n        console.log(\"手机屏幕的宽是\",size.width);\r\n        console.log(\"手机屏幕的高是\",size.height);\r\n    },\r\n    update (dt) {\r\n        if(this.isTokenTime)\r\n        { \r\n            this.fTokenTime +=dt; \r\n            if(this.fTokenTime>7000)\r\n            {\r\n                this.RefreshToken();\r\n                this.isTokenTime=false;\r\n                this.fTokenTime=0;\r\n            }\r\n        }\r\n        if(!this.wxLoginSuccess){\r\n            //判断用户微信是否登录\r\n            var loginState = jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\"GetWeChatState\",\"()I\")\r\n            console.log(\"微信登录状态是\",loginState + typeof(loginState));\r\n            console.log(\"loginState === 1\",loginState === 1);\r\n            if(loginState === 1){\r\n                var code = jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\"GetCode\",\"()Ljava/lang/String;\");\r\n                console.log(\"in update code is \",code);\r\n                this.GetAccessToken(code);\r\n                jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\"Init\",\"()V\");\r\n                this.wxLoginSuccess = true;\r\n            }\r\n        }\r\n        if(Global.wechatSuccess){\r\n            //显示等待节点\r\n            this.waitServer.active = true;\r\n        }\r\n      \r\n    },\r\n});\r\n"]}