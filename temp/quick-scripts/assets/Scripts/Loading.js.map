{"version":3,"sources":["Loading.js"],"names":["cc","Class","extends","Component","properties","jindu","Label","onLoad","progressBar","node","getComponent","ProgressBar","console","log","self","CC_WECHATGAME","LoginScene","url","type","progress","clearAll","loader","load","progressCallback","bind","completeCallback","active","director","loadScene","start","i","length","u","release","completedCount","totalCount","res","resource","err","texture","update","dt","result","Number","toFixed","string"],"mappings":"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","file":"Loading.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        jindu : cc.Label\r\n    },\r\n    onLoad () {\r\n        this.progressBar = this.node.getComponent(cc.ProgressBar);\r\n        console.log(\"准备跳转微信登录\");\r\n        var self = this;\r\n        if(CC_WECHATGAME){\r\n            this.LoginScene = false;\r\n            this.url = [\r\n                {url : 'res/import/08/0870c92c9.24289.json',type : 'json'},\r\n                {url : 'res/raw-assets/Textures/cPart/vs.3f508.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/shareIcon.81701.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/fenxiang.e347a.png',type : 'png'},\r\n                //音频文件\r\n                {url : 'res/raw-assets/Audio/rival1.3e5c4.mp3',type : 'mp3'},\r\n                {url : 'res/raw-assets/Textures/Common1.d9856.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/Common2.eaac7.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/cover.96e9c.png',type : 'png'},\r\n            ];\r\n            this.progressBar.progress = 0;\r\n            this.clearAll();\r\n            cc.loader.load(self.url,self.progressCallback.bind(self),self.completeCallback.bind(self));\r\n        }else{\r\n            this.node.active =false;\r\n            cc.director.loadScene(\"Login\");\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    clearAll : function(){\r\n        for(let i = 0;i < this.url.length;i++){\r\n            let u = this.url[i];\r\n            cc.loader.release(u);\r\n        }\r\n    },\r\n    progressCallback : function(completedCount,totalCount,res){\r\n        console.log(\"进入回调函数\");\r\n        console.log(\"已经完成的数量\",completedCount);\r\n        console.log(\"资源的总数量\",totalCount);\r\n        this.progress = completedCount/totalCount;\r\n        console.log(\"进度是：\",this.progress);\r\n        this.resource = res;\r\n    },\r\n    completeCallback : function(err,texture){\r\n        if(err){\r\n            console.log(\"下载图片失败\");\r\n        }\r\n        console.log(\"texture is \",texture);\r\n    },\r\n    update (dt) {\r\n        if(!this.resource){\r\n            return ;\r\n        }\r\n        this.progressBar.progress = this.progress;\r\n        let result = new Number(this.progress*100);\r\n        result = result.toFixed();\r\n        if(result.length === 1){\r\n            this.jindu.string = \"    \" + result;\r\n        }else if(result.length === 2){\r\n            this.jindu.string = \"  \" + result;\r\n        }else if(result.length === 3){\r\n            this.jindu.string = result;\r\n        }\r\n        console.log(\"this.progress is \",this.progress);\r\n        if(this.progress >= 1){\r\n            console.log(\"加载完成\");\r\n            //如果登录场景没有加载过就加载一次\r\n            if(!this.LoginScene){\r\n                cc.director.loadScene(\"Login\");\r\n                //场景已经加载过了\r\n                this.LoginScene = true;\r\n            }\r\n            return;\r\n        }\r\n        // if(progress < this.progress){\r\n        //     progress += dt;\r\n        // }\r\n        // this.progressBar.progress = progress;\r\n\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}