{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\PublicClass.js"],"names":["window","Global","game1Main","nWidth","nWidthPuYo","nTimeInteval","nSide","nSide1","wechatSuccess","CreatBackGround","arrayBackGround","nRow","nLine","prefab","groundParent","width","cc","log","i","j","groundNode","instantiate","parent","setPosition","p","push","console","x","y","SortArray","nArrayLength","nLineX","nRowY","k","l","oldX","oldY","SetBackground","nodeBox","nBox","getPositionX","getPositionY","height","nServerWidth","nServerFigureWidth","initMapForEnemy","up","lr","back","row","col","nodeHeight","girdSize","nodeWidth","backGroundArr","map","tempX","Number","toFixed","outArr","mapData","tempY","tempPrefab","setPrefabPosition","node","arguments","length","getComponent","isFilled","type","innerNode","Class","extends","Component","properties","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAOC,MAAP,GAAgB;AACZ;AACCC,eAAU,IAFC;AAGX;AACAC,YAAO,EAJI;AAKX;AACAC,gBAAW,GANA;AAOX;AACAC,kBAAa,GARF;AASX;AACAC,WAAM,CAVK;AAWX;AACAC,YAAO,EAZI;AAaX;AACAC,mBAAgB,KAdL;AAeX;AACAC,qBAAgB,yBAASC,eAAT,EAAyBC,IAAzB,EAA8BC,KAA9B,EAAoCC,MAApC,EAA2CC,YAA3C,EAAwDC,KAAxD,EAA8D;AAC1EC,WAAGC,GAAH,CAAO,yCAAuCP,eAA9C;AACAM,WAAGC,GAAH,CAAO,iCAA+BN,IAAtC;AACAK,WAAGC,GAAH,CAAO,4BAA0BL,KAAjC;AACAI,WAAGC,GAAH,CAAOJ,SAAO,oCAAd;AACD,aAAI,IAAIK,IAAE,CAAV,EAAYA,KAAGN,QAAM,CAArB,EAAuBM,GAAvB,EACA;AACIR,4BAAgBQ,CAAhB,IAAmB,EAAnB;AACH;AACD,aAAI,IAAIA,IAAE,CAAV,EAAYA,KAAGN,QAAM,CAArB,EAAuBM,GAAvB,EACA;AACI,iBAAI,IAAIC,IAAE,CAAV,EAAYA,KAAGR,OAAK,CAApB,EAAsBQ,GAAtB,EACA;AACI,oBAAIC,aAAWJ,GAAGK,WAAH,CAAeR,MAAf,CAAf;AACAO,2BAAWE,MAAX,GAAkBR,YAAlB;AACAM,2BAAWG,WAAX,CAAuBP,GAAGQ,CAAH,CAAKN,IAAEH,KAAP,EAAaI,IAAEJ,KAAf,CAAvB;AACAL,gCAAgBQ,CAAhB,EAAmBO,IAAnB,CAAwBL,UAAxB;AACA,oBAAGF,MAAM,CAAN,IAAWC,MAAM,CAApB,EAAsB;AAClBO,4BAAQT,GAAR,CAAY,cAAZ,EAA2BP,gBAAgBQ,CAAhB,EAAmBC,CAAnB,EAAsBQ,CAAjD,EAAmDjB,gBAAgBQ,CAAhB,EAAmBC,CAAnB,EAAsBS,CAAzE;AACH;AACJ;AACJ;AACH,KAtCU;AAuCX;AACAC,eAAU,mBAASC,YAAT,EAAsBC,MAAtB,EAA6BC,KAA7B,EAAmC;AAC1C,aAAI,IAAIC,IAAE,CAAV,EAAYA,KAAGH,eAAa,CAA5B,EAA8BG,GAA9B,EACA;AACI,gBAAGA,KAAGH,eAAa,CAAnB,EACA;AACI,qBAAI,IAAII,IAAED,IAAE,CAAZ,EAAcC,KAAG,CAAjB,EAAmBA,GAAnB,EACA;AACI,wBAAGF,MAAME,CAAN,IAASF,MAAMC,CAAN,CAAZ,EACA;AACI,4BAAIE,OAAKJ,OAAOE,CAAP,CAAT;AACAF,+BAAOE,CAAP,IAAUF,OAAOG,CAAP,CAAV;AACAH,+BAAOG,CAAP,IAAUC,IAAV;AACC,4BAAIC,OAAKJ,MAAMC,CAAN,CAAT;AACAD,8BAAMC,CAAN,IAASD,MAAME,CAAN,CAAT;AACAF,8BAAME,CAAN,IAASE,IAAT;AACJ;AACJ;AACJ;AACJ;AACH,KA3DU;AA4DX;AACAC,mBAAc,uBAASC,OAAT,EAAiBxB,YAAjB,EAA8ByB,IAA9B,EAAmCjC,KAAnC,EAAyC;AACpD,YAAIqB,IAAEW,QAAQE,YAAR,KAAuBF,QAAQvB,KAAR,GAAc,CAArC,GAAuCT,KAAvC,GAA6CiC,OAAK,CAAxD;AACA,YAAIX,IAAEU,QAAQG,YAAR,KAAuBH,QAAQI,MAAR,GAAe,CAAtC,GAAwCpC,KAAxC,GAA8CiC,OAAK,CAAzD;AACAzB,qBAAaS,WAAb,CAAyBI,CAAzB,EAA2BC,CAA3B;AAEF,KAlEU;AAmEV;AACAe,kBAAe,EApEL;AAqEVC,wBAAqB,EArEX;AAsEV;AACF;;;;;;;AAOAC,qBAAkB,yBAASC,EAAT,EAAYC,EAAZ,EAAeC,IAAf,EAAoBC,GAApB,EAAwBC,GAAxB,EAA4B;AAC1C;AACA,YAAItB,IAAI,CAAC,KAAKuB,UAAN,GAAiB,CAAjB,GAAqB,KAAKC,QAAL,GAAc,CAAnC,GAAuCN,EAA/C;AACA;AACA,YAAInB,IAAI,CAAC,KAAK0B,SAAN,GAAgB,CAAhB,GAAoB,KAAKD,QAAL,GAAc,CAAlC,GAAsCL,EAA9C;AACArB,gBAAQT,GAAR,CAAY,iBAAiBU,CAA7B;AACAD,gBAAQT,GAAR,CAAY,mBAAmBgC,GAA/B;AACAvB,gBAAQT,GAAR,CAAY,mBAAmBiC,GAA/B;AACA,aAAKI,aAAL,GAAqB,EAArB;AACA,aAAKC,GAAL,GAAW,EAAX;AACA;AACA,aAAI,IAAIrC,IAAI,CAAZ,EAAcA,IAAIgC,GAAlB,EAAsBhC,GAAtB,EAA0B;AACtB;AACA,gBAAIsC,QAAO7B,IAAIT,IAAI,KAAKkC,QAAb,GAAwB,CAAnC;AACAI,oBAAQC,OAAOD,MAAME,OAAN,CAAc,CAAd,CAAP,CAAR;AACAhC,oBAAQT,GAAR,CAAY,qBAAqBuC,KAAjC;AACA,iBAAKF,aAAL,CAAmBpC,CAAnB,IAAwB,EAAxB;AACA,iBAAKqC,GAAL,CAASrC,CAAT,IAAc,EAAd;AACA,iBAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI8B,GAAnB,EAAuB9B,GAAvB,EAA2B;AACvB,oBAAIwC,SAAS,KAAKL,aAAL,CAAmBpC,CAAnB,CAAb;AACA,oBAAI0C,UAAU,KAAKL,GAAL,CAASrC,CAAT,CAAd;AACA,oBAAI2C,QAAQjC,IAAIT,IAAI,KAAKiC,QAAb,GAAwB,CAApC;AACAS,wBAAQJ,OAAOI,MAAMH,OAAN,CAAc,CAAd,CAAP,CAAR;AACAhC,wBAAQT,GAAR,CAAY,qBAAqB4C,KAAjC;AACA;AACA,oBAAIC,aAAa,KAAKC,iBAAL,CAAuBf,IAAvB,EAA4BQ,KAA5B,EAAkCK,KAAlC,EAAwC,KAAKG,IAA7C,CAAjB;AACA,oBAAGC,UAAUC,MAAV,KAAqB,CAAxB,EAA0B;AACtBJ,+BAAWK,YAAX,CAAwBF,UAAU,CAAV,CAAxB,EAAsCG,QAAtC,GAAiD,CAAjD;AACA;AACA;AACAN,+BAAWK,YAAX,CAAwBF,UAAU,CAAV,CAAxB,EAAsCI,IAAtC,GAA6C,CAAC,CAA9C;AACAP,+BAAWK,YAAX,CAAwBF,UAAU,CAAV,CAAxB,EAAsCK,SAAtC,GAAkD,IAAlD;AACH,iBAND,MAMM,IAAGL,UAAUC,MAAV,KAAqB,CAAxB,EAA0B;AAC5B;AACAJ,+BAAWK,YAAX,CAAwB,MAAxB,EAAgCC,QAAhC,GAA2C,CAA3C;AACA;AACA;AACAN,+BAAWK,YAAX,CAAwB,MAAxB,EAAgCE,IAAhC,GAAuC,CAAC,CAAxC;AACAP,+BAAWK,YAAX,CAAwB,MAAxB,EAAgCG,SAAhC,GAA4C,IAA5C;AACH;;AAED;AACAX,uBAAOxC,CAAP,IAAU2C,UAAV;AACAF,wBAAQzC,CAAR,IAAa,CAAb;AACH;AACJ;AACDO,gBAAQT,GAAR,CAAY,sBAAqB,KAAKqC,aAAtC;AACH;AA7HW,CAAhB;AA+HAtC,GAAGuD,KAAH,CAAS;AACLC,aAASxD,GAAGyD,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfQ,KAHP;;AAqBL;;AAEA;;AAEAC,SAzBK,mBAyBI,CAER;AA3BI;;AA6BL;AA7BJ","file":"PublicClass.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nwindow.Global = {\r\n    //声明全局Game1Main\r\n     game1Main:null,\r\n     //单机版小方块的宽度\r\n     nWidth:72,\r\n     //单机板浦友浦友的小块宽度\r\n     nWidthPuYo:120,        \r\n     //俄罗斯方块下落时间间隔\r\n     nTimeInteval:0.7,  \r\n     //游戏界面背景框边的长度\r\n     nSide:8,\r\n     //噗呦噗呦背景狂的长度\r\n     nSide1:12,   \r\n     //微信是否登录成功\r\n     wechatSuccess : false,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \r\n     //生成对手游戏背景\r\n     CreatBackGround:function(arrayBackGround,nRow,nLine,prefab,groundParent,width){\r\n         cc.log(\"arrayBackGround111111111111111111111\"+arrayBackGround);\r\n         cc.log(\"nRow111111111111111111111111\"+nRow);\r\n         cc.log(\"nLine111111111111111111\"+nLine);\r\n         cc.log(prefab+\"prefab1111111111111111111111111111\")\r\n        for(var i=0;i<=nLine-1;i++)\r\n        {\r\n            arrayBackGround[i]=[];\r\n        }\r\n        for(var i=0;i<=nLine-1;i++)\r\n        {\r\n            for(var j=0;j<=nRow-1;j++)\r\n            {\r\n                var groundNode=cc.instantiate(prefab);\r\n                groundNode.parent=groundParent;\r\n                groundNode.setPosition(cc.p(i*width,j*width));\r\n                arrayBackGround[i].push(groundNode);\r\n                if(i === 0 && j === 0){\r\n                    console.log(\"第0列第0行的节点坐标是\",arrayBackGround[i][j].x,arrayBackGround[i][j].y);\r\n                }\r\n            }\r\n        }  \r\n     },\r\n     //从小到大排序数组行数\r\n     SortArray:function(nArrayLength,nLineX,nRowY){\r\n        for(var k=0;k<=nArrayLength-1;k++)\r\n        {\r\n            if(k<=nArrayLength-2)\r\n            {\r\n                for(var l=k+1;l<=3;l++)\r\n                {\r\n                    if(nRowY[l]<nRowY[k])\r\n                    {\r\n                        var oldX=nLineX[k];\r\n                        nLineX[k]=nLineX[l];\r\n                        nLineX[l]=oldX;\r\n                         var oldY=nRowY[k];\r\n                         nRowY[k]=nRowY[l];\r\n                         nRowY[l]=oldY;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n     },\r\n     //设置背景父节点位置 父节点 和背景节点在同一个坐标系里\r\n     SetBackground:function(nodeBox,groundParent,nBox,nSide){\r\n        var x=nodeBox.getPositionX()-nodeBox.width/2+nSide+nBox/2;\r\n        var y=nodeBox.getPositionY()-nodeBox.height/2+nSide+nBox/2;\r\n        groundParent.setPosition(x,y);\r\n\r\n     },\r\n      //网络板小方块的快宽度\r\n      nServerWidth : 30,\r\n      nServerFigureWidth : 50,\r\n      //初始化敌人地图\r\n    /**\r\n     *@param  {外框上边缘的厚度} up\r\n     * @param  {外框左右边缘的厚度} lr\r\n     * @param  {背景网格的预制体} back\r\n     * @param  {行数} row\r\n     * @param  {列数} col\r\n     */\r\n    initMapForEnemy : function(up,lr,back,row,col){\r\n        //初始化y坐标(从下往上生成网格)\r\n        var y = -this.nodeHeight/2 + this.girdSize/2 + up;\r\n        //初始化x坐标\r\n        var x = -this.nodeWidth/2 + this.girdSize/2 + lr;\r\n        console.log(\"--->>>>x is \" + x);\r\n        console.log(\"--->>>>row is \" + row);\r\n        console.log(\"--->>>>col is \" + col);\r\n        this.backGroundArr = [];\r\n        this.map = [];\r\n        //12行6列的网格\r\n        for(var i = 0;i < col;i++){\r\n            //设置它的y坐标\r\n            var tempX =x + i * this.girdSize + 1;\r\n            tempX = Number(tempX.toFixed(2));\r\n            console.log(\"--->>>>tempX is \" + tempX);\r\n            this.backGroundArr[i] = [];\r\n            this.map[i] = [];\r\n            for(var j = 0; j < row;j++){\r\n                var outArr = this.backGroundArr[i];\r\n                var mapData = this.map[i];\r\n                var tempY = y + j * this.girdSize + 1;\r\n                tempY = Number(tempY.toFixed(2));\r\n                console.log(\"--->>>>tempY is \" + tempY);\r\n                //y坐标不变，x坐标要变\r\n                var tempPrefab = this.setPrefabPosition(back,tempX,tempY,this.node);\r\n                if(arguments.length === 6){\r\n                    tempPrefab.getComponent(arguments[5]).isFilled = 0;\r\n                    // tempPrefab.isFilled = 0;\r\n                    // console.log(\"tempPrefab.isFilled is \" + tempPrefab.isFilled);\r\n                    tempPrefab.getComponent(arguments[5]).type = -1;\r\n                    tempPrefab.getComponent(arguments[5]).innerNode = null;\r\n                }else if(arguments.length === 5){\r\n                    // var node = new Shape(tempPrefab,-1);\r\n                    tempPrefab.getComponent(\"Back\").isFilled = 0;\r\n                    // tempPrefab.isFilled = 0;\r\n                    // console.log(\"tempPrefab.isFilled is \" + tempPrefab.isFilled);\r\n                    tempPrefab.getComponent(\"Back\").type = -1;\r\n                    tempPrefab.getComponent(\"Back\").innerNode = null;\r\n                }\r\n                \r\n                // var shape = new Shape(tempPrefab,-1);\r\n                outArr[j]=tempPrefab;\r\n                mapData[j] = 0;\r\n            }\r\n        }\r\n        console.log(\"backGroundArr is \" +this.backGroundArr);\r\n    }\r\n};\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}