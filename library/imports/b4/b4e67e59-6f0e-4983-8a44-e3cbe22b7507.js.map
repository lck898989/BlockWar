{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Game2/assets\\Scripts\\Game2\\PuyoDown.js"],"names":["cc","Class","extends","Component","properties","onLoad","nPositionX","nPositionY","isCollision","stringBoloekShape","nRotateAngle","isGameOver","isStationary","nColor","puyouChild","node","getChildren","nRow","nLine","isChangeParent","nCollisionBack","nDownSpeed","BlockDown","isMove","blockChild","i","length","nY","getPositionY","find","Global","nWidthPuYo","log","nBoxArray","nXArray","nYArray","CountPosition","nX","getPositionX","game1Main","userGroundChild","getComponent","isBox","nArrayRow","nArrayList","arratSubScript","arrayX","arrayY","push","j","k","nOldY","nOldX","nSubScript","isOver","nBox","GetShape","AddBoxNumber","a","b","DownBlock","stringBlock","nArray","nx","ny","nRotate1","start","IsDown","isDown","nodePuyo","update","dt","isRotate","y","stringColor"],"mappings":"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","file":"PuyoDown.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Game2","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        //初始化旋转后的实际x坐标\r\n        this.nPositionX = 0;\r\n        //初始化旋转后的实际y坐标\r\n        this.nPositionY = 0;\r\n        //初始化碰撞开关\r\n        this.isCollision = false;\r\n        //获取 此噗呦块的形状\r\n        this.stringBoloekShape = \"\";\r\n        this.nRotateAngle = 0;\r\n        //初始化结束游戏开关\r\n        this.isGameOver = false;\r\n        this.isStationary = false;\r\n        //初始化颜色数量\r\n        this.nColor = 0;\r\n        //获取此噗呦块的字数组\r\n        this.puyouChild = this.node.getChildren();\r\n        //初始化数组的行]\r\n        this.nRow = [];\r\n        //初始化数组的列\r\n        this.nLine = [];\r\n        this.isChangeParent = false;\r\n        //初始化噗呦块碰撞后的帧数\r\n        this.nCollisionBack = 0;\r\n        // Global.SortArray(this.puyouChild.length, this.nRow, this.nLine);\r\n        //控制噗呦块的下落速度\r\n        this.nDownSpeed=24;\r\n    },\r\n    BlockDown: function () {\r\n        //判断噗呦方块是否移动过一次\r\n        var isMove = true;\r\n        //获取节点子节点数组\r\n        var blockChild = this.node.getChildren();\r\n        //  //判断噗呦方块是否结束地面\r\n        //  var isCollisionGround=false;\r\n        //判断噗呦方块中是否含有22行\r\n        for (var i = 0; i <= blockChild.length - 1; i++) {\r\n            var nY = (blockChild[i].getPositionY() + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) / Global.nWidthPuYo + 1;\r\n            cc.log(nY + \"=======================================================================\");\r\n            if (nY == 14) {\r\n                isMove = false;\r\n            }\r\n        }\r\n        if (isMove == false) {\r\n            //初始化噗呦方块中第21行方块的数组下表\r\n            var nBoxArray = [];\r\n            //初始化噗呦方块中第21行方块的数组列\r\n            var nXArray = [];\r\n            //初始化噗呦方块中第21行方块的数组行\r\n            var nYArray = [];\r\n            //遍历噗呦方块并并判断第21行的下面是否为true\r\n            for (var i = 0; i <= blockChild.length - 1; i++) {\r\n                this.CountPosition(blockChild[i]);\r\n                //获取此时组成噗呦方块元素的行列\r\n                var nX = (this.nPositionX + this.node.getPositionX() - cc.find(\"GroundParent\").getPositionX()) / Global.nWidthPuYo + 1;\r\n                var nY = (this.nPositionY + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) / Global.nWidthPuYo + 1;\r\n                if (nY == 13) {\r\n                    if (Global.game1Main.userGroundChild[nX - 1][nY - 2].getComponent(\"BoxState\").isBox) {\r\n                        this.isGameOver = true;\r\n                    }\r\n                    //    else\r\n                    //    {\r\n                    //        nBoxArray.push(i);\r\n                    //        nXArray.push(nX);\r\n                    //        nYArray.push(nY);\r\n                    //    }\r\n                }\r\n                // if(i==3&&this.isGameOver==false)\r\n                // {\r\n                // //初始化变化方块数组\r\n                // this.arrayChangeNode=[];\r\n                // // this.node.y -=Global.nWidthPuYo;\r\n                // if(nBoxArray.length>=2)\r\n                // {\r\n                //    for(var j=0;j<=nBoxArray.length-1;j++)\r\n                //    {\r\n                //       Global.game1Main.userGroundChild[nXArray[j]-1][nYArray[j]-2].getComponent(\"BoxState\").stringColor=this.stringColor;\r\n                //       Global.game1Main.userGroundChild[nXArray[j]-1][nYArray[j]-2].getComponent(\"BoxState\").isBox=true;    \r\n                //       this.arrayChangeNode.push({\"row\":nYArray[j]-2,\"col\":nXArray[j]-1,\"color\":this.stringColor}); \r\n                //    }\r\n                // }\r\n                // if(nBoxArray.length==1)\r\n                // {\r\n                //     cc.log(nXArray[0]-1);\r\n                //     cc.log(nYArray[0]-2);\r\n                //     cc.log(Global.game1Main.userGroundChild[nXArray[0]-1][nYArray[0]-2].getComponent(\"BoxState\").stringColor);\r\n                //     Global.game1Main.userGroundChild[nXArray[0]-1][nYArray[0]-2].getComponent(\"BoxState\").stringColor=this.stringColor;\r\n                //     Global.game1Main.userGroundChild[nXArray[0]-1][nYArray[0]-2].getComponent(\"BoxState\").isBox=true;  \r\n                //     this.arrayChangeNode.push({\"row\":nYArray[0]-2,\"col\":nXArray[0]-1,\"color\":this.stringColor}); \r\n                // }\r\n                // this.node.y -=Global.nWidth;\r\n                // this.isDownState=true;\r\n                // }     \r\n            }\r\n        }\r\n        else {\r\n            //存取噗呦块的行数\r\n            var nArrayRow = [];\r\n            //存取噗呦方块的列数\r\n            var nArrayList = [];\r\n            //存取噗呦方块的下标\r\n            this.arratSubScript = [];\r\n            this.arrayX = [];\r\n            this.arrayY = [];\r\n            //将噗呦方块的行列存入数组中\r\n            for (var i = 0; i <= blockChild.length - 1; i++) {\r\n                this.CountPosition(blockChild[i]);\r\n                //获取此时组成噗呦方块元素的行列\r\n                var nX = (this.nPositionX + this.node.getPositionX() - cc.find(\"GroundParent\").getPositionX()) / Global.nWidthPuYo + 1;\r\n                var nY = (this.nPositionY + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) / Global.nWidthPuYo + 1;\r\n                nArrayList.push(nX);\r\n                nArrayRow.push(nY);\r\n                this.arratSubScript.push(i);\r\n            }\r\n\r\n            //从小到大排序行数\r\n            for (var j = 0; j <= blockChild.length - 1; j++) {\r\n                if (j <= blockChild.length - 2) {\r\n                    for (var k = j + 1; k <= blockChild.length - 1; k++) {\r\n                        if (nArrayRow[k] < nArrayRow[j]) {\r\n                            var nOldY = nArrayRow[j];\r\n                            nArrayRow[j] = nArrayRow[k];\r\n                            nArrayRow[k] = nOldY;\r\n                            var nOldX = nArrayList[j];\r\n                            nArrayList[j] = nArrayList[k];\r\n                            nArrayList[k] = nOldX;\r\n                            var nSubScript = this.arratSubScript[j];\r\n                            this.arratSubScript[j] = this.arratSubScript[k];\r\n                            this.arratSubScript[k] = nSubScript;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this.isGameOver == false) {\r\n                if (nArrayRow[0] == 1) {\r\n                    for (var i = 0; i <= nArrayRow.length - 1; i++) {\r\n                        this.arrayX.push(nArrayList[i]);\r\n                        this.arrayY.push(nArrayRow[i]);\r\n                    }\r\n                    //    this.fCollisionTime=0;\r\n                    this.isCollision = true;\r\n                    return;\r\n                }\r\n                else {\r\n                    this.isOver = false;\r\n                    //存取该块的行列数组\r\n                    // var blockChild=this.node.getChildren();\r\n                    for (var i = 0; i <= blockChild.length - 1; i++) {\r\n                        this.CountPosition(blockChild[i]);\r\n                        //获取此时组成噗呦方块元素的行列\r\n                        var nX = (this.nPositionX + this.node.getPositionX() - cc.find(\"GroundParent\").getPositionX()) / Global.nWidthPuYo + 1;\r\n                        var nY = (this.nPositionY + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) / Global.nWidthPuYo + 1;\r\n                        if (i == 0) {\r\n                            this.nBox = 0;\r\n                            // this.isDown = false;\r\n                        }\r\n                        this.GetShape(this.stringBoloekShape, i, nX, nY, this.nRotateAngle);\r\n                        if (i == blockChild.length - 1) {\r\n                            for (var i = 0; i <= nArrayRow.length - 1; i++) {\r\n                                this.arrayX.push(nArrayList[i]);\r\n                                this.arrayY.push(nArrayRow[i]);\r\n                            }\r\n                        }\r\n                        // if (i == blockChild.length-1) {\r\n                        //     this.fDownTime = 0;\r\n                        // }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    AddBoxNumber: function (a, b) {\r\n        cc.log(a);\r\n        // cc.log(b);\r\n        // cc.log( this.node.getPositionY());\r\n        if (Global.game1Main.userGroundChild[a - 1][b - 2].getComponent(\"BoxState\").isBox == false) {\r\n            this.nBox++;\r\n        }\r\n        else {\r\n            if (b == 13) {\r\n                // cc.log(this.nRotateAngle);\r\n                // cc.log(this.stringBoloekShape);\r\n                // cc.log(\"0-------------------------------------\");\r\n                this.isGameOver = true;\r\n            }\r\n        }\r\n    },\r\n    //下落物体并将物体的false置为true\r\n    DownBlock: function () {\r\n        // if (this.isDown == false) {\r\n        //     //存取噗呦方块的行数\r\n        //     var nArrayRow = [];\r\n        //     //存取噗呦方块的列数\r\n        //     var nArrayList = [];\r\n        //     //获取节点子节点数组\r\n        //     var blockChild = this.node.getChildren();\r\n        //     this.arrayChangeNode = [];\r\n        //     for (var i = 0; i <= blockChild.length - 1; i++) {\r\n        //         //获取此时组成噗呦方块元素的行列\r\n        //         var nX = (blockChild[i].getPositionX() + this.node.getPositionX() - cc.find(\"GroundParent\").getPositionX()) / Global.nWidthPuYo + 1;\r\n        //         var nY = (blockChild[i].getPositionY() + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) / Global.nWidthPuYo + 1;\r\n        //         if (nY <= 12) {\r\n        //             Global.game1Main.userGroundChild[nX - 1][nY - 1].getComponent(\"BoxState\").isBox = true;\r\n        //             Global.game1Main.userGroundChild[nX - 1][nY - 1].getComponent(\"BoxState\").stringColor = blockChild[i].getComponent(\"InitPrefabState\").stringColor;\r\n        //         }\r\n        //     }\r\n        // }\r\n        // this.isDown = true;\r\n    },\r\n    GetShape: function (stringBlock, nArray, nx, ny, nRotate1) {\r\n        // //判断下落快中是否有行数大于20行的\r\n        // if (ny > 20) {\r\n        //     this.isOver = true;\r\n        // }\r\n        switch (stringBlock) {\r\n            case \"L\":\r\n                if (nRotate1 == 0 || nRotate1 == 360) {\r\n                    switch (nArray) {\r\n                        case 0:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 2:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 2) {\r\n\r\n                            if (this.isOver) {\r\n                                //  this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n\r\n                        }\r\n                    }\r\n                }\r\n                else if (nRotate1 == 90) {\r\n                    switch (nArray) {\r\n                        case 1:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 2:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 2) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n                else if (nRotate1 == 180) {\r\n                    switch (nArray) {\r\n                        case 1:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 2:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 2) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    switch (nArray) {\r\n                        case 0:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 1:\r\n                            cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 2) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case \"Long\":\r\n                if (nRotate1 == 0 || nRotate1 == 360) {\r\n                    if (nArray == 0) {\r\n\r\n                        this.AddBoxNumber(nx, ny);\r\n                    }\r\n                    if (this.nBox == 1) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 1) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n                        }\r\n                    }\r\n                }\r\n                else if (nRotate1 == 90) {\r\n\r\n                    // if (nArray == 0) {\r\n                    //     this.AddBoxNumber(nx, ny);\r\n                    // }\r\n                    switch (nArray) {\r\n                        case 0:\r\n\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 1:\r\n\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n                   \r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 1) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n                        }\r\n                    }\r\n                }\r\n                else if (nRotate1 == 180) {\r\n                    if (nArray == 1) {\r\n                        this.AddBoxNumber(nx, ny);\r\n                        cc.log(this.nBox + \"this.nBox \");\r\n                    }\r\n                    if (this.nBox == 1) {\r\n                        this.DownBlock();\r\n                    }\r\n                    \r\n                    else {\r\n                        if (nArray == 1) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    cc.log(\"===============\");\r\n                    switch (nArray) {\r\n                        case 0:\r\n                            cc.log(\"00000000000000\");\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 1:\r\n                            cc.log(\"1111111111111111\");\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 1) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n                        }\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"Square\":\r\n            cc.log(\"Square\");\r\n                if (this.nColor == 1) {\r\n                    switch (nArray) {\r\n                        case 0:\r\n                        cc.log(this.nBox +\"Square\");\r\n                        cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                        case 1:\r\n                        cc.log(this.nBox +\"Square\");\r\n                        cc.log(nArray);\r\n                            this.AddBoxNumber(nx, ny);\r\n                            break;\r\n                    }\r\n                    if (this.nBox == 2) {\r\n                        this.DownBlock();\r\n                    }\r\n                    else {\r\n                        if (nArray == 3) {\r\n                            if (this.isOver) {\r\n                                // this.isGameOver=true;\r\n                            }\r\n                            this.isCollision = true;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (nRotate1 == 0 || nRotate1 == 360) {\r\n                        switch (nArray) {\r\n                            case 0:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                            case 1:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                        }\r\n                        if (this.nBox == 2) {\r\n                            this.DownBlock();\r\n                        }\r\n                        else {\r\n                            if (nArray == 3) {\r\n                                if (this.isOver) {\r\n                                    // this.isGameOver=true;\r\n                                }\r\n                                this.isCollision = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (nRotate1 == 90) {\r\n                        switch (nArray) {\r\n                            case 1:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                            case 3:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                        }\r\n                        if (this.nBox == 2) {\r\n                            this.DownBlock();\r\n                        }\r\n                        else {\r\n                            if (nArray == 3) {\r\n                                if (this.isOver) {\r\n                                    // this.isGameOver=true;\r\n                                }\r\n                                this.isCollision = true;\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    else if (nRotate1 == 180) {\r\n                        switch (nArray) {\r\n                            case 2:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                            case 3:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                        }\r\n                        if (this.nBox == 2) {\r\n                            this.DownBlock();\r\n                        }\r\n                        else {\r\n                            if (nArray == 3) {\r\n                                if (this.isOver) {\r\n                                    // this.isGameOver=true;\r\n                                }\r\n                                this.isCollision = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        switch (nArray) {\r\n                            case 0:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                            case 2:\r\n                                this.AddBoxNumber(nx, ny);\r\n                                break;\r\n                        }\r\n                        if (this.nBox == 2) {\r\n                            this.DownBlock();\r\n                        }\r\n                        else {\r\n                            if (nArray == 3) {\r\n                                if (this.isOver) {\r\n                                    // this.isGameOver=true;\r\n                                }\r\n                                this.isCollision = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    start() {\r\n\r\n    },\r\n    //判断噗呦块是否满足下落判定条件\r\n    IsDown: function () {\r\n        for (var i = 0; i <= this.puyouChild.length - 1; i++) {\r\n            this.CountPosition(this.puyouChild[i]);\r\n            if ((this.nPositionY + this.node.getPositionY() - cc.find(\"GroundParent\").getPositionY()) % Global.nWidthPuYo == 0) {\r\n                this.isDown = true;\r\n            }\r\n        }\r\n    },\r\n    CountPosition: function (nodePuyo) {\r\n        if (this.stringBoloekShape == \"Long\" && this.nColor == 2) {\r\n            this.nPositionX = nodePuyo.getPositionX();\r\n            this.nPositionY = nodePuyo.getPositionY();\r\n        }\r\n        else {\r\n            switch (this.nRotateAngle) {\r\n                case 0:\r\n                    //赋值实际坐标\r\n                    this.nPositionX = nodePuyo.getPositionX();\r\n                    this.nPositionY = nodePuyo.getPositionY();\r\n                    break;\r\n                case 90:\r\n                    this.nPositionX = nodePuyo.getPositionY();\r\n                    this.nPositionY = -nodePuyo.getPositionX();\r\n                    break;\r\n                case 180:\r\n                    this.nPositionX = -nodePuyo.getPositionX();\r\n                    this.nPositionY = -nodePuyo.getPositionY();\r\n                    break;\r\n                case 270:\r\n                    this.nPositionX = -nodePuyo.getPositionY();\r\n                    this.nPositionY = nodePuyo.getPositionX();\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n    update(dt) {\r\n        if (this.isCollision == false && this.isGameOver == false) {\r\n            //判断是否满足下落判定条件\r\n            this.isDown = false;\r\n            this.IsDown();\r\n            if (this.isDown) {\r\n                if (Global.game1Main.isRotate == false) {\r\n                    this.BlockDown();\r\n                    if (this.isCollision == false && this.isGameOver == false) {\r\n                        this.node.y -= Global.nWidthPuYo / this.nDownSpeed;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.node.y -= Global.nWidthPuYo / this.nDownSpeed;\r\n            }\r\n        }\r\n        if (this.isCollision) {\r\n            cc.log(\"ssssssssssss\");\r\n            this.nCollisionBack++;\r\n            if (this.nCollisionBack == 15) {\r\n                for (var i = 0; i <= this.arrayX.length - 1; i++) {\r\n                    cc.log(this.arrayX[i]);\r\n                    cc.log(this.arrayY[i]);\r\n                    Global.game1Main.userGroundChild[this.arrayX[i] - 1][this.arrayY[i] - 1].getComponent(\"BoxState\").isBox = true;\r\n                    Global.game1Main.userGroundChild[this.arrayX[i] - 1][this.arrayY[i] - 1].getComponent(\"BoxState\").stringColor = this.puyouChild[this.arratSubScript[i]].getComponent(\"InitPrefabState\").stringColor;\r\n                    if (i == this.arrayX.length - 1) {\r\n                        //打开噗呦块固定开关\r\n                        this.isStationary = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // if (this.isStationary) {\r\n        // }\r\n    },\r\n});\r\n"]}