{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\GetServer.js"],"names":["cc","Class","extends","Component","properties","winAudio","url","AudioClip","default","onLoad","willDisappearRow","SendLongMsg","jsonMsg","userMsg","tag1","find","getComponent","tokenMsg","nameUser","score","type","pictureUser","console","log","hasOwnProperty","nDisappear","nDisappear1","removeRow","result","state","state1","changeMapList","changeMapList1","removeMapList","removeMapList1","map","row","nMapRow","col","nMapCol","loadingState","loading1","result_score","b","JSON","stringify","websocket","undefined","send","connectLongSerive","self","onopen","event","nUserScore","onmessage","msg1","parse","data","GetServerMsg","onerror","onclose","getChildByName","active","code","reason","msg","userInfoScript","GetUserMsg","token","integral","WebSocket","openid","director","loadScene","CC_WECHATGAME","wx","hideLoading","matchState","matchSuccess","msg2","i","playerList","length","name","pictureEnemy","rivalName","sys","isNative","LoadUserPicture","LoadRivalPicture","rowColArr","nGameType","push","toString","nEnemyGame","nameEnemy","beginMap","nodeArray","rivalGameType","Label","string","initMap","rivalIconNode","userIconNode","enemyGroundChild","Global","CreatBackGround","prefabEnemy","nodeEnemyParent","nServerWidth","GetBlock","initMapForTwoAndFour","initRivalMap","prefabEnemy1","changeMap","userType","forEach","element","typeName","color","start","Date","getMilliseconds","Promise","resolve","reject","loader","loadRes","SpriteFrame","err","frame","end","backGroundArr","Sprite","spriteFrame","then","delay","txt","arratColor","color1","punishMap","rows","PunishUp","nodePunish","instantiate","punishPrefab","parent","boxParent","setPosition","groundChild","getPositionX","getPositionY","stringColor","isBox","arrayChangeNode","isPunish","wasPunishedByRival","userGameType","isDisppearEnemy","rivalTouchBarry","info","keyArr","Object","keys","removeRows","showScoreForGame1","ShowScore","userInfo","lose","isWin","audioEngine","play","interactable","jsonData","opacity","pause","gameType","update","dt"],"mappings":"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","file":"GetServer.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        //胜利音效\r\n        winAudio : {\r\n            url      : cc.AudioClip,\r\n            default  : null, \r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        \r\n        // //初始化token计时器\r\n        // this.fTokenTime +=dt\r\n        this.willDisappearRow = 0;\r\n    },\r\n    /**\r\n     * @param  {} jsonMsg\r\n     * jsonMsg.tag1 : Number\r\n     * jsonMsg.nDisappear1 : String\r\n     * \r\n     */\r\n    //通过长链接 给服务器发消息\r\n    SendLongMsg:function(jsonMsg){\r\n         this.userMsg={\"tag\":jsonMsg.tag1,\"token\":cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").tokenMsg,\"name\":cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nameUser,\"integral\":jsonMsg.score,\"type\":jsonMsg.type,\"url\":cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser,\"map\":{},\"loadingState\":0,\"changeMapList\":[],\"removeMapList\":[],\"state\":0,\"nDisappear\":0};\r\n         console.log(\"tag is \" + jsonMsg.tag1);\r\n         //加分数据发送到服务器\r\n         if(('nDisappear1' in jsonMsg) && jsonMsg.hasOwnProperty('nDisappear1')){\r\n            //将该属性添加到json对象中去\r\n            this.userMsg.nDisappear=jsonMsg.nDisappear1;\r\n         }\r\n         //惩罚相关数据发送服务器\r\n         if(('removeRow' in jsonMsg) && jsonMsg.hasOwnProperty('removeRow')){\r\n            this.userMsg.removeRow = jsonMsg.removeRow;\r\n         }\r\n         //游戏结束通知对手自己胜利了需要的参数\r\n         if(('result' in jsonMsg) && jsonMsg.hasOwnProperty('result')){\r\n            this.userMsg.result = jsonMsg.result;\r\n         }\r\n         console.log(this.userMsg+\"this.userMsg555555555555555\");\r\n         this.userMsg.state=jsonMsg.state1;\r\n         this.userMsg.changeMapList=jsonMsg.changeMapList1;\r\n         this.userMsg.removeMapList=jsonMsg.removeMapList1;\r\n         this.userMsg.map.row=jsonMsg.nMapRow;\r\n         this.userMsg.map.col=jsonMsg.nMapCol;\r\n         this.userMsg.loadingState=jsonMsg.loading1;\r\n         //游戏结束所需要添加的字段\r\n         if(('result_score' in jsonMsg) && jsonMsg.hasOwnProperty('result_score')){\r\n                //将该属性添加到json对象中去\r\n                this.userMsg.result_score = jsonMsg.result_score;\r\n         }\r\n         var b=JSON.stringify(this.userMsg);\r\n         console.log(\"---->>>>b is \" + b);\r\n         console.log(\"@@@@@@@@@@@@@@@websocket is \" + this.websocket);\r\n         if(this.websocket != undefined){\r\n            this.websocket.send(b);\r\n            console.log(this.userMsg+\"this.userMsg666666666666666666666666\");\r\n         }\r\n         \r\n         \r\n    },\r\n    //长链接\r\n    /**\r\n     * @param  {长连接的类型} type\r\n     */\r\n    connectLongSerive:function(type){\r\n        var self=this;\r\n        cc.log(\"333333333333333333333333333333333333333\");\r\n        this.websocket.onopen = function (event) {\r\n            cc.log(\"88888888888888888888888888888888888888888888888\");\r\n            self.SendLongMsg({\"tag1\":2,\"type\":\"1\",\"score\":cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nUserScore,\"nMapRow\":\"\",\"nMapCol\":\"\"});\r\n            // 2,\"1\",cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nUserScore\r\n        };\r\n        this.websocket.onmessage = function (event) {\r\n                var msg1=JSON.parse(event.data);\r\n                console.log(\"msg1 is \" + msg1);\r\n                cc.log(event.data+\"9999999999999999999999999999999999999999999999999999999999999\");\r\n                console.log(\"event data is \" + event.data);\r\n                self.GetServerMsg(msg1);\r\n        };\r\n        this.websocket.onerror = function (event) {\r\n            console.log(\"Send Text fired an error\");\r\n            console.log(\"error event \",event);\r\n        };\r\n        this.websocket.onclose = function (event) {\r\n            //重新连接\r\n            console.log(\"WebSocket instance closed.\");\r\n            console.log(\"重新连接了\");\r\n            cc.find(\"PebmanentNode\").getChildByName(\"loseLink\").active = true;\r\n            console.log(\"close event \",event);\r\n            console.log(\"code \",event.code);\r\n            console.log(\"reason \",event.reason);\r\n        };         \r\n    },\r\n   //根据服务器返回的信息进行操作\r\n   GetServerMsg:function(msg1){\r\n    console.log(\"118\",msg1)\r\n    console.log(\"msg1.msg's out is  \",msg1.msg);  \r\n    var userInfoScript = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\");\r\n    if(msg1.result==\"ok\")\r\n    {\r\n        console.log(\"msg1.msg is \",msg1.msg);\r\n        switch(msg1.msg)\r\n        {\r\n            case \"getUser\":\r\n                        cc.find(\"Canvas\").getComponent(\"WechatLogin\").GetUserMsg();\r\n                        break;\r\n            //app版的接收用户信息            \r\n            case \"userMsg\": \r\n                         var score=JSON.parse(msg1.data);\r\n                         userInfoScript.tokenMsg=msg1.token;\r\n                         userInfoScript.nUserScore=score.integral;\r\n                         this.websocket= new WebSocket(\"ws://m5ws.ykplay.com\");\r\n                         console.log(\"websocket is \",this.websocket);\r\n                         this.connectLongSerive();\r\n                        break;\r\n            //微信小游戏接收用户信息 \r\n            case \"userMsg_1\":\r\n                console.log(\"微信小程序服务器发送的数据来了\");\r\n                var score=JSON.parse(msg1.data);\r\n                userInfoScript.tokenMsg=msg1.token;\r\n                userInfoScript.nUserScore=score.integral;\r\n                console.log(\"msg1.data is \",msg1.data);\r\n                userInfoScript.openid = score.openid;\r\n                console.log(\"openid is \",userInfoScript.openid);\r\n                var self = this;\r\n                this.websocket= new WebSocket(\"wss://m5ws.ykplay.com\");\r\n                this.connectLongSerive();\r\n                break;\r\n            case \"linkSuccess\":\r\n                           cc.log(JSON.stringify(msg1)+\"///////////////////////////////////////////////////\");\r\n                           cc.director.loadScene(\"Main\",function(){\r\n                               //隐藏加载中\r\n                               if(CC_WECHATGAME){\r\n                                   wx.hideLoading();\r\n                               }\r\n                           });\r\n                           break;\r\n            case \"addMatching\":\r\n                          console.log(\"add Matching state\");\r\n                          userInfoScript.matchState=\"addMatching\";\r\n                        //   cc.director.loadScene(\"MatchUser\");\r\n                        //   if( userInfoScript.isLoad)\r\n                        //   {\r\n                        //     userInfoScript.LoadTwoUser(userInfoScript.pictureUser,userInfoScript.pictureUser,cc.find(\"UserName\"),userInfoScript.nameUser,cc.find(\"UserPicture1\"),cc.find(\"UserPicture\"));\r\n                        //   }\r\n                           break;   \r\n            case \"broadcast\":                    \r\n                           /**\r\n                            * \r\n                            * 进入匹配界面\r\n                            * \r\n                            * */    \r\n                           //设置用户的匹配状态为true \r\n                           cc.find(\"Canvas\").getComponent(\"MatchState\").matchSuccess = true;\r\n                           var msg2=msg1.data;\r\n                           console.log(\"--------------------------------------------------------\");\r\n                           console.log(userInfoScript.matchState+\"555555555555555????????????????????????????????????????\");\r\n                           for(let i = 0;i<msg2.playerList.length;i++){\r\n                               console.log(\"name is \",msg2.playerList[i].name);\r\n                               console.log(\"url is \",msg2.playerList[i].url);\r\n                               if(msg2.playerList[i].name != userInfoScript.nameUser){\r\n                                   //保存对手的信息\r\n                                   userInfoScript.pictureEnemy = msg2.playerList[i].url;\r\n                                   userInfoScript.rivalName = msg2.playerList[i].name;\r\n                                   console.log(\"对手的图片信息是：\",userInfoScript.pictureEnemy);\r\n                               }\r\n                           }\r\n                           console.log(\"广播消息是\",\"ddddddddddddddddd\",cc.find(\"Canvas\").getComponent(\"MatchState\").matchSuccess);\r\n                           //证明两个人都进入游戏界面加载对手的头像\r\n                           if(cc.sys.isNative){\r\n                               userInfoScript.LoadUserPicture(userInfoScript.pictureEnemy,cc.find(\"EnemyPicture\"));\r\n                           }\r\n                           if(CC_WECHATGAME){\r\n                               console.log(\"对手的图片是:\",userInfoScript.pictureEnemy);\r\n                               console.log(\"-------------------------->>>>>>>>>>>>>>\");\r\n                               //加载对手的图片\r\n                               userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,cc.find(\"EnemyPicture\"));\r\n                           }\r\n                          break; \r\n            case \"loadOk\":\r\n                        var rowColArr = [];\r\n                        if(userInfoScript.nGameType === \"4\" ||\r\n                            userInfoScript.nGameType === \"3\" ||\r\n                            userInfoScript.nGameType === \"2\"){\r\n                            rowColArr.push(12);\r\n                            rowColArr.push(6);\r\n                        }else{\r\n                            rowColArr.push(20);\r\n                            rowColArr.push(10);\r\n                        }\r\n                        console.log(\"loadOk@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");\r\n                        cc.find(\"PebmanentNode\").getComponent(\"GetServer\").SendLongMsg({\"tag1\":8,\"type\":userInfoScript.nGameType,\"score\":userInfoScript.nUserScore,\"nMapRow\":rowColArr[0].toString(),\"nMapCol\":rowColArr[1].toString()});\r\n                        break;              \r\n             case \"initMap\":\r\n                            // cc.log(\"ssssssssssssssssssssssssssss\");\r\n                            //初始化敌人的游戏类型\r\n                            console.log(\"222222222222222222222222222222\");\r\n                            var nEnemyGame=\"\";\r\n                            //初始化敌人的名字\r\n                            var nameEnemy=\"\";\r\n                            //初始化敌人的游戏类型\r\n                            nEnemyGame=msg1.beginMap.nodeArray[0].type;\r\n                            //初始化敌人的游戏类型数据\r\n                            userInfoScript.rivalGameType = nEnemyGame;\r\n                            console.log();\r\n                            console.log(typeof msg1.data+\"ssssssssssssssssssssssssssss\");\r\n                            if(msg1.data.playerList[0].name==userInfoScript.nameUser)\r\n                            {\r\n                                nameEnemy=msg1.data.playerList[1].name;\r\n                            }\r\n                            else\r\n                            {\r\n                                nameEnemy=msg1.data.playerList[0].name;\r\n\r\n                            }\r\n                            console.log(nameEnemy+\"33333333333333333333333333333333333333333333333\");\r\n                            switch(nEnemyGame)\r\n                            {\r\n                                //敌人为俄罗斯方块游戏\r\n                                case \"1\":\r\n                                     console.log(\"敌人的游戏类型为俄罗斯方块\");\r\n                                     if(userInfoScript.nGameType === \"2\" || userInfoScript.nGameType === \"4\"){\r\n                                        console.log(\"自己的游戏类型为画像方块和宝石方块\");\r\n                                        cc.find(\"Canvas/rivalInfo/rivalName\").getComponent(cc.Label).string = nameEnemy;\r\n                                        //当前的游戏类型为1初始化地图\r\n                                        cc.find(\"Canvas/rivalGame\").getComponent(\"RivalGame\").initMap(20,10,\"1\");\r\n                                        var rivalIconNode = cc.find(\"Canvas/rivalInfo/rivalIcon\");\r\n                                        //原生环境显示用户头像\r\n                                        if(cc.sys.isNative){\r\n                                            userInfoScript.LoadUserPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                        }\r\n                                        //微信小游戏显示头像\r\n                                        if(CC_WECHATGAME){\r\n                                            userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                        }\r\n                                        //加载用户头像\r\n                                        var userIconNode = cc.find(\"Canvas/userIcon\");\r\n                                        userInfoScript.LoadUserPicture(userInfoScript.pictureUser,userIconNode);\r\n                                     }else{\r\n                                        console.log(\"自己的游戏类型为俄罗斯方块\");\r\n                                        cc.find(\"EnemyName\").getComponent(cc.Label).string += nameEnemy;\r\n                                         //初始化自己和敌人状态\r\n                                        userInfoScript.LoadUserPicture(userInfoScript.pictureUser,cc.find(\"UserPicture\"));\r\n                                        var rivalIconNode = cc.find(\"EnemyPicture\");\r\n                                        if(CC_WECHATGAME){\r\n                                            userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                        }else if(cc.sys.isNative){\r\n                                            userInfoScript.LoadUserPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                        }\r\n                                        console.log(\"initMap1111111111111111111111111111\"+cc.find(\"Canvas\")\r\n                                        .getComponent(\"PersonsGame1Main\").enemyGroundChild);\r\n                                       //显示敌人的游戏地图\r\n                                       Global.CreatBackGround(cc.find(\"Canvas\")\r\n                                       .getComponent(\"PersonsGame1Main\")\r\n                                       .enemyGroundChild,20,10,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").prefabEnemy,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").nodeEnemyParent,Global.nServerWidth);\r\n                                       //生成方块\r\n                                       cc.find(\"Canvas\")\r\n                                        .getComponent(\"PersonsGame1Main\").GetBlock();\r\n                                        \r\n                                     }\r\n                                    //   Global.CreatBackGround(this.userGroundChild,20,10,this.prefabUser,this.nodeUserParent,Global.nWidth);\r\n                                    break;\r\n                                //敌人为宝石方块游戏类型\r\n                                case \"2\":       \r\n                                    if(userInfoScript.nGameType === \"2\" || userInfoScript.nGameType === \"4\"){\r\n                                        console.log(\"initMap\");\r\n                                        this.initMapForTwoAndFour(nameEnemy,userInfoScript,\"2\");\r\n                                    }else{\r\n                                        //自己的游戏类型为俄罗斯方块或者噗呦噗呦\r\n                                        cc.log(\"initMap\");\r\n                                        cc.find(\"EnemyName\").getComponent(cc.Label).string += nameEnemy;\r\n                                        cc.log(\"initMap1111111111111111111111111111\"+cc.find(\"Canvas\")\r\n                                        .getComponent(\"PersonsGame1Main\").enemyGroundChild);\r\n                                         //初始化自己和敌人状态\r\n                                         userInfoScript.LoadUserPicture(userInfoScript.pictureUser,cc.find(\"UserPicture\"));\r\n                                         var rivalIconNode = cc.find(\"EnemyPicture\");\r\n                                         userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                       //显示敌人的游戏地图\r\n                                        cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").initRivalMap(8,8,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").prefabEnemy1[1],12,6);\r\n                                    //    Global.CreatBackGround(cc.find(\"Canvas\")\r\n                                    //    .getComponent(\"PersonsGame1Main\").initRivalMap();\r\n                                    //    Global.initMapForEnemy(8,8,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").prefabEnemy1[2],12,6);\r\n                                       //生成方块\r\n                                       cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").GetBlock();\r\n                                    }  \r\n                                    break;\r\n                                case \"3\":\r\n                                      break;\r\n                                case \"4\":\r\n                                    if(userInfoScript.nGameType === \"2\" || userInfoScript.nGameType === \"4\"){\r\n                                        console.log(\"initMap\");\r\n                                        this.initMapForTwoAndFour(nameEnemy,userInfoScript,\"4\");\r\n                                    }else{\r\n                                        cc.log(\"initMap\");\r\n                                        cc.find(\"EnemyName\").getComponent(cc.Label).string += nameEnemy;\r\n                                        cc.log(\"initMap1111111111111111111111111111\"+cc.find(\"Canvas\")\r\n                                        .getComponent(\"PersonsGame1Main\").enemyGroundChild);\r\n                                         //初始化自己和敌人状态\r\n                                         userInfoScript.LoadUserPicture(userInfoScript.pictureUser,cc.find(\"UserPicture\"));\r\n                                         var rivalIconNode = cc.find(\"EnemyPicture\");\r\n                                         if(CC_WECHATGAME){\r\n                                             userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                         }else{\r\n                                             userInfoScript.LoadUserPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n                                         }\r\n                                       //显示敌人的游戏地图\r\n                                        cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").initRivalMap(8,8,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").prefabEnemy1[2],12,6);\r\n                                    //    Global.CreatBackGround(cc.find(\"Canvas\")\r\n                                    //    .getComponent(\"PersonsGame1Main\").initRivalMap();\r\n                                    //    Global.initMapForEnemy(8,8,cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").prefabEnemy1[2],12,6);\r\n                                       //生成方块\r\n                                       cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").GetBlock();\r\n                                    }\r\n                                    break;\r\n                            }\r\n                            break;\r\n            \r\n            case \"changeMap\":\r\n                           var msg2=msg1.changeMap;\r\n                           console.log(\"=================msg2=============== is \" + msg2);\r\n                           var rivalGameType = userInfoScript.rivalGameType;\r\n                           var userType = userInfoScript.nGameType;\r\n                           console.log(\"#############################\",rivalGameType,userType);\r\n                           if(rivalGameType === \"2\" || rivalGameType === \"4\"){\r\n                                console.log(\"<<<<<<<<<<<<<<<<<<<<<<=========>>>>>>>>>>>>>>>>>Enter forEach function\");\r\n                                msg2.forEach(element =>{\r\n                                    //当前的节点所在的行\r\n                                    let row = element.row;\r\n                                    //节点所在的列\r\n                                    let col = element.col;\r\n                                    //该节点类型名\r\n                                    var typeName = \"\";\r\n                                    if(rivalGameType === \"4\"){\r\n                                        switch(element.color){\r\n                                            case \"-1\":\r\n                                                typeName = \"-1\";\r\n                                                break;\r\n                                            case \"0\":\r\n                                                typeName = \"7\";\r\n                                                break;\r\n                                            case \"1\":\r\n                                                typeName = \"8\";\r\n                                                break;\r\n                                            case \"2\":\r\n                                                typeName = \"9\";\r\n                                                break;\r\n                                            case \"3\":\r\n                                                typeName = \"10\";\r\n                                                break;\r\n                                            case \"4\":\r\n                                                typeName = \"11\";\r\n                                                break;\r\n                                            case \"5\":\r\n                                                typeName = \"12\";\r\n                                                break;\r\n                                            case \"6\":\r\n                                                typeName = \"13\";\r\n                                                break;\r\n                                            case \"7\":\r\n                                                typeName = \"14\";\r\n                                                break;  \r\n                                        }    \r\n                                    }else{\r\n                                        switch(element.color){\r\n                                            case \"-1\":\r\n                                                typeName = \"-1\";\r\n                                                break;\r\n                                            case \"0\":\r\n                                                typeName = \"20\";\r\n                                                break;\r\n                                            case \"1\":\r\n                                                typeName = \"19\";\r\n                                                break;\r\n                                            case \"2\":\r\n                                                typeName = \"18\";\r\n                                                break;\r\n                                            case \"3\":\r\n                                                typeName = \"16\";\r\n                                                break;\r\n                                        }\r\n                                    }\r\n                                    \r\n                                    //动态加载图片\r\n                                    console.log(\"==================>>>>typeName is \" + typeName);\r\n                                    console.log(\"==================>>>>row is \" + row);\r\n                                    console.log(\"==================>>>> col is \" + col);\r\n                                    if(typeName != undefined){\r\n                                        if(userType === \"2\" || userType === \"4\"){\r\n                                            var start = new Date().getMilliseconds();\r\n                                            if(userType === \"4\"){\r\n                                                new Promise(function(resolve,reject){\r\n                                                    console.log(\"进入Lck游戏类型Promise\");\r\n                                                    cc.loader.loadRes(\"Game4/\"+typeName,cc.SpriteFrame,function(err,frame){\r\n                                                        console.log(\"进入加载图片过程\");\r\n                                                        var end = new Date().getMilliseconds();\r\n                                                        cc.find(\"Canvas/rivalGame\").getComponent(\"RivalGame\").backGroundArr[row][col].getComponent(cc.Sprite).spriteFrame = frame; \r\n                                                        resolve(end-start);\r\n                                                    });\r\n                                                }).then(function(delay){\r\n                                                    console.log(\"加载资源所用时间:\" + delay);\r\n                                                });\r\n                                            }else{\r\n                                                new Promise(function(resolve,reject){\r\n                                                    console.log(\"进入Lck游戏类型Promise\");\r\n                                                    cc.loader.loadRes(\"Game3/\"+typeName,cc.SpriteFrame,function(err,frame){\r\n                                                        console.log(\"进入加载图片过程\");\r\n                                                        var end = new Date().getMilliseconds();\r\n                                                        cc.find(\"Canvas/rivalGame\").getComponent(\"RivalGame\").backGroundArr[row][col].getComponent(cc.Sprite).spriteFrame = frame; \r\n                                                        resolve(end-start);\r\n                                                    });\r\n                                                }).then(function(delay){\r\n                                                    console.log(\"加载资源所用时间:\" + delay);\r\n                                                });\r\n                                            }\r\n                                        }else if(userType === \"1\" || userType === \"3\"){\r\n                                            console.log(\"改变地图用户游戏类型小泉\");\r\n                                            cc.loader.loadRes(\"Game4/\"+typeName, cc.SpriteFrame, function(err,txt){\r\n                                                console.log(element.col+\"改变地图用户游戏类型\");\r\n                                                console.log(element.row+\"改变地图用户游戏类型为小泉游戏\");\r\n                                                cc.find(\"Canvas\")\r\n                                                .getComponent(\"PersonsGame1Main\")\r\n                                                .enemyGroundChild[element.row][element.col].getComponent(cc.Sprite).spriteFrame=txt;      \r\n                                            });\r\n                                        }\r\n                                    }\r\n                                });\r\n                                console.log(\"===================>>>>>>>>>>\");\r\n                            }else{\r\n                                //存取颜色\r\n                                console.log(\"对手的游戏类型为小泉的游戏\");\r\n                                var arratColor=[];\r\n                                msg2.forEach(element => {\r\n                                    var color1=\"\";\r\n                                    switch(element.color)\r\n                                    {\r\n                                        case \"red\":\r\n                                                    color1=\"3\";\r\n                                                    break;\r\n                                        case \"blue\":\r\n                                                    color1=\"2\"; \r\n                                                    break;\r\n                                        case \"green\":\r\n                                                    color1=\"1\";\r\n                                                    break;\r\n                                        case \"white\":\r\n                                                    color1=\"0\";\r\n                                                    break;\r\n                                    }\r\n                                    console.log(\"游戏类型color1 is --->>\" + color1);\r\n                                    if(userType === \"1\" || userType === \"3\"){\r\n                                        console.log(\"改变地图用户游戏类型小泉\");\r\n                                        cc.loader.loadRes(\"picture/\"+color1, cc.SpriteFrame, function(err,txt){\r\n                                            console.log(element.col+\"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\");\r\n                                            console.log(element.row+\"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\");\r\n                                            console.log();\r\n                                            cc.find(\"Canvas\")\r\n                                            .getComponent(\"PersonsGame1Main\")\r\n                                            .enemyGroundChild[element.col][element.row].getComponent(cc.Sprite).spriteFrame=txt;      \r\n                                        });\r\n                                    }else if(userType === \"2\" || userType === \"4\"){\r\n                                        console.log(\"改变地图用户游戏类型Lck\");\r\n                                        cc.loader.loadRes(\"picture/\"+color1, cc.SpriteFrame, function(err,txt){\r\n                                            console.log(element.col+\" 改变地图用户游戏类型\");\r\n                                            console.log(element.row+\" 改变地图用户游戏类型为Lck游戏\");\r\n                                            cc.find(\"Canvas/rivalGame\")\r\n                                            .getComponent(\"RivalGame\")\r\n                                            .backGroundArr[element.col][element.row].getComponent(cc.Sprite).spriteFrame=txt;      \r\n                                        });\r\n                                    }\r\n                                });\r\n                            }\r\n                           break;\r\n             //绘制敌人惩罚地图              \r\n             case \"punishMap\": \r\n                           var msg2=msg1.punishMap;\r\n                           for(var i=0;i<=msg1.punishMap.length-1;i++)\r\n                           {\r\n                               cc.log(JSON.stringify(msg1.punishMap[i]));\r\n                           }\r\n                           cc.log(msg1.punishMap.toString());\r\n                           \r\n                           //获得用户游戏类型（因为这个消息是服务器给被惩罚人发的这里被惩罚人就是当前玩家）\r\n                           var userType = userInfoScript.nGameType;\r\n                           console.log(\"punishMap Canvas is \",cc.find(\"Canvas\"));\r\n                           console.log(\"punishMap----->>\",userType);\r\n                           switch(userType){\r\n                               case \"1\":\r\n                                    console.log(msg1+\"punishMap111111111111111111111111\");\r\n                                    console.log(\"punishMap \",msg1.rows);\r\n                                    cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").PunishUp(msg1.rows);\r\n                                    msg2.forEach(element => {\r\n                                        var color1=\"\";\r\n                                        switch(element.color)\r\n                                        {\r\n                                            case \"red\":\r\n                                                    color1=\"3\";\r\n                                                    break;\r\n                                            case \"blue\":\r\n                                                    color1=\"2\"; \r\n                                                    break;\r\n                                            case \"green\":\r\n                                                    color1=\"1\";\r\n                                                    break;\r\n                                            case \"white\":\r\n                                                    color1=\"0\";\r\n                                                    break;\r\n                                        }\r\n                                        if(element.color!=\"white\")\r\n                                        {\r\n                                            cc.loader.loadRes(\"picture/\"+color1, cc.SpriteFrame, function(err,txt){\r\n                                                var nodePunish=cc.instantiate(cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").punishPrefab);\r\n                                                nodePunish.parent=cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").boxParent;\r\n                                                nodePunish.setPosition(cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").groundChild[element.col][element.row].getPositionX(),cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").groundChild[element.col][element.row].getPositionY());\r\n                                                nodePunish.getComponent(cc.Sprite).spriteFrame=txt;\r\n                                                cc.find(\"Canvas\")\r\n                                                .getComponent(\"PersonsGame1Main\")\r\n                                                .groundChild[element.col][element.row].getComponent(\"PrefabState\").stringColor=element.color;\r\n                                                cc.find(\"Canvas\")\r\n                                            .getComponent(\"PersonsGame1Main\")\r\n                                            .groundChild[element.col][element.row].getComponent(\"PrefabState\").isBox=true;       \r\n                                            }); \r\n                                        }\r\n                                    });\r\n                                    for(var i=0;i<=msg1.punishMap.length-1;i++)\r\n                                    {\r\n                                        cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").arrayChangeNode.push(msg1.punishMap[i]);\r\n                                    }\r\n                                    cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").isPunish=true;\r\n                                    break;\r\n                                case \"2\":\r\n                                    //宝石游戏惩罚方式\r\n                                    break;\r\n                                case \"3\":\r\n                                    break;\r\n                                case \"4\":\r\n                                    console.log(\"punishMap44444444444444444444444\");\r\n                                    //如果敌人游戏类型为是4的话按照游戏四进行惩罚\r\n                                    cc.find(\"Canvas/Game\").getComponent(\"Game4Fight\").wasPunishedByRival(msg1.punishMap);\r\n                                    break;\r\n\r\n                            }\r\n                           \r\n                          break;\r\n             case \"enemyDisappear\":\r\n                          cc.log(msg1+\"enemyDisappear111111111111111111111111111111111\");\r\n                            //打开敌人消行开关\r\n                            var rivalGameType = userInfoScript.rivalGameType;\r\n                            var userGameType = userInfoScript.nGameType;\r\n                            switch(userGameType){\r\n                                case \"1\":\r\n                                    cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").isDisppearEnemy=true;\r\n                                    break;\r\n                                case \"2\":\r\n                                    cc.find(\"Canvas/Game\").getComponent(\"FightGame3\").rivalTouchBarry = true;\r\n                                    break;\r\n                                case \"3\":\r\n                                    break;\r\n                                case \"4\":\r\n                                    console.log(\"接收到监听敌人是否下落的指示\");\r\n                                    cc.find(\"Canvas/Game\").getComponent(\"Game4Fight\").rivalTouchBarry = true; \r\n                                    console.log(\"-->接收敌人信息!!!!!!!!!!!!!!!!!\");\r\n                                    break;         \r\n                            }\r\n                          \r\n                        break;  \r\n            case \"addScore\":\r\n                           console.log(\"in addScore msg1 is \" + msg1);\r\n                           console.info(msg1);\r\n                           let keyArr = Object.keys(msg1);\r\n                           keyArr.forEach(element =>{\r\n                               console.log(element);\r\n                               console.log(\"in addScore msg1[\"+ element +\"] is \" + msg1[element]);\r\n                           })\r\n                           //显示敌人分数\r\n                           var userGameType = userInfoScript.nGameType;\r\n                           //敌人的游戏类型\r\n                           var rivalGameType = userInfoScript.rivalGameType;\r\n                           console.log(\"in addScore 对手的游戏类型是\",rivalGameType);\r\n                           console.log(\"in addScore 用户游戏类型是\",userGameType);\r\n                            //四种游戏类型\r\n                            if(userGameType === \"2\" || userGameType === \"4\"){\r\n                                //加分操作\r\n                                console.log(\"in addScore 我是游戏类型2或者4我要加分了\",msg1);\r\n                                console.log(\"in addScore (((((((((msg1.removeRows is \" + msg1.removeRows.toString());\r\n                                //检查对手的游戏类型每种游戏类型的计分方式不同\r\n                                if(rivalGameType === \"2\" || rivalGameType === \"4\"){\r\n                                    console.log(\"in addScore 对手的游戏类型为2或者4自己的游戏类型为2或者4\");\r\n                                    cc.find(\"Canvas/rivalInfo/score\").getComponent(cc.Label).string = msg1.removeRows.toString();\r\n                                }else{\r\n                                    console.log(\"in addScore 对手的游戏类型为1或者3自己的游戏类型为2或者4\");\r\n                                    cc.find(\"Canvas/Game\").getComponent(\"Game4Fight\").showScoreForGame1(msg1.removeRows,cc.find(\"Canvas/rivalInfo/score\"));\r\n                                }\r\n                            }else if(userGameType === \"1\" || userGameType === \"3\"){\r\n                                console.log(\"in addScore 我是游戏类型1或者3我要加分了\",msg1);\r\n                                //游戏类型2或者4直接发送的是分数直接显示分数就完了\r\n                                if(rivalGameType === \"2\" || rivalGameType === \"4\"){\r\n                                    console.log(\"in addScore 对手的游戏类型为2或者4自己的游戏类型为1或者3\");\r\n                                    cc.find(\"EnemyScore\").getComponent(cc.Label).string = msg1.removeRows;\r\n                                }else{\r\n                                    console.log(\"in addScore 对手的游戏类型为1或者3自己的游戏类型为1或者3\");\r\n                                    cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").ShowScore(msg1.removeRows,cc.find(\"EnemyScore\"));\r\n                                }\r\n                            }\r\n                        break;    \r\n            //游戏结束结算            \r\n            case \"result_exit\":\r\n                console.log(\"in result_exit-----------------\");   \r\n                //接收的结算信息的时候将结算节点不显示\r\n                //自己的游戏类型\r\n                var userGameType = userInfoScript.nGameType;\r\n                //对手的游戏类型\r\n                var rivalGameType = userInfoScript.rivalGameType;\r\n                //获得用户数据\r\n                console.log(\"msg1 is \",msg1);\r\n                var userInfo = msg1.data;\r\n                console.log(\"userInfo is \",userInfo);\r\n                if(userGameType === \"2\" || userGameType === \"4\"){\r\n                    console.log(\"in result_exit 自己的游戏类型为画像或者宝石\");\r\n                    if(!cc.find(\"Canvas/Over\").active){\r\n                        cc.find(\"Canvas/Over\").active = true;\r\n                        cc.find(\"Canvas/Over_light_widget\").active = true;\r\n                        //自己失败显示失败\r\n                        cc.find(\"Canvas/Over\").getChildByName(\"lose\").active = false;\r\n                        //自己没有赢不显示胜利的标记\r\n                        cc.find(\"Canvas/Over\").getChildByName(\"win\").active = true;\r\n                    }\r\n                    cc.find(\"Canvas/Over/result\").active = false;\r\n                    //显示自己的积分\r\n                    cc.find(\"Canvas/Over/Score\").getComponent(cc.Label).string = userInfo.integral.toString();\r\n                    //暂停当前游戏\r\n                    // cc.director.pause();\r\n                    // cc.find(\"Canvas/Over/again\").on(\"touchstart\",function(){\r\n                    //     cc.director.loadScene(\"PersonsChoose\");\r\n                    // });\r\n                    // cc.find(\"Canvas/Over/quit\").on(\"touchstart\",function(){\r\n                    //     cc.director.loadScene(\"PersonsChoose\");\r\n                    // });\r\n                }else if(userGameType === \"1\" || userGameType === \"3\"){\r\n                     if(cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").lose==true)\r\n                     {\r\n                         cc.find(\"NodeOverLose/Score\").getComponent(cc.Label).string +=userInfo.integral.toString();\r\n                         cc.find(\"NodeOverLose/wait\").active=false;\r\n                     }\r\n                     else\r\n                     {\r\n                        cc.find(\"NodeOverWin/Score\").getComponent(cc.Label).string +=userInfo.integral.toString();\r\n                        cc.find(\"NodeOverWin/wait\").active=false;\r\n                        cc.find(\"Canvas\").getComponent(\"PersonsGame1Main\").isWin=true;\r\n                        // cc.find(\"Canvas\").getComponent()\r\n                        // cc.director.pause();\r\n                     }\r\n                    \r\n                    //显示俄罗斯方块的结束界面\r\n                    console.log(\"in result_exit 自己的游戏类型为俄罗斯方块游戏结束\");\r\n                }\r\n                break;   \r\n            case \"getResult\":\r\n                //该用户胜利了\r\n                cc.audioEngine.play(this.winAudio,false,1);\r\n                var userGameType = userInfoScript.nGameType;\r\n                console.log(\"getResult ....................\"+userGameType);\r\n                if(userGameType === \"2\" || userGameType === \"4\"){\r\n                    console.log(\"in getResult 自己的游戏类型为画像或者宝石\");\r\n                    cc.find(\"Canvas/Game\").getComponent(\"Game4Fight\").isWin = true;\r\n                    //进入画像或者宝石方块的游戏结束界面\r\n                    //其他下降，旋转按钮，左右移动按钮处于不可激活状态\r\n                    cc.find(\"Canvas/down\").interactable = false;\r\n                    cc.find(\"Canvas/rotate\").interactable = false;\r\n                    cc.find(\"Canvas/slide\").interactable = false;\r\n                    //显示结束动画\r\n                    cc.find(\"Canvas/Over_light_widget\").active = true;\r\n                    // var animation = this.gameOverAnimation.getComponent(cc.Animation);\r\n                    // animation.play(\"Over_light\"); \r\n                    cc.find(\"Canvas/Over\").active = true;\r\n                    cc.find(\"Canvas/mask\").active = true;\r\n                    //自己失败显示失败\r\n                    cc.find(\"Canvas/Over\").getChildByName(\"lose\").active = false;\r\n                    //自己没有赢不显示胜利的标记\r\n                    cc.find(\"Canvas/Over\").getChildByName(\"win\").active = true;\r\n                    //暂停当前游戏\r\n                    // cc.director.pause();\r\n                    // cc.find(\"Canvas/Over/again\").on(\"touchstart\",function(){\r\n                    //     cc.director.loadScene(\"PersonsChoose\");\r\n                    // });\r\n                    // cc.find(\"Canvas/Over/quit\").on(\"touchstart\",function(){\r\n                    //     cc.director.loadScene(\"PersonsChoose\");\r\n                    // });\r\n                    //给服务器发送赢家的分数消息\r\n                    var jsonData = {\r\n                        tag1            : 4,\r\n                        score           : \"\",\r\n                        type            : userGameType,\r\n                        state1          : \"\",\r\n                        changeMapList1  : [],\r\n                        removeMapList1  : 0,\r\n                        nMapRow         : \"\",\r\n                        nMapCol         : \"\",\r\n                        loading1        : \"\",\r\n                        result_score    : \"\",\r\n                    }\r\n                    //获得赢家的分数\r\n                    jsonData.result_score = cc.find(\"Canvas/score\").getComponent(cc.Label).string;\r\n                    //给服务器发送消息\r\n                    this.SendLongMsg(jsonData);\r\n                }else if(userGameType === \"1\" || userGameType === \"3\"){\r\n                    console.log(\"getResult ....................\");\r\n                    cc.find(\"New Sprite(Splash)\").opacity=120; \r\n                    // //初始化我赢了\r\n                    // this.gameResult=true;\r\n                    cc.find(\"NodeOverWin\").active=true;\r\n                     //给服务器发送赢家的分数消息\r\n                     var jsonData = {\r\n                        tag1            : 4,\r\n                        score           : \"\",\r\n                        type            : userGameType,\r\n                        state1          : \"\",\r\n                        changeMapList1  : [],\r\n                        removeMapList1  : 0,\r\n                        nMapRow         : \"\",\r\n                        nMapCol         : \"\",\r\n                        loading1        : \"\",\r\n                        result_score    : \"\",\r\n                    }\r\n                    // if(userGameType==\"1\")\r\n                    // {\r\n                    //     jsonData.tag1=1;\r\n                    // }\r\n                    // else\r\n                    // {\r\n                    //     jsonData.tag1=3;\r\n                    // }\r\n                    //获得赢家的分数\r\n                    jsonData.result_score = cc.find(\"UserScore\").getComponent(cc.Label).string;\r\n                    this.SendLongMsg(jsonData);\r\n                     //显示胜利界面   \r\n                    //显示俄罗斯方块的结束界面\r\n                    console.log(\"in result_exit 自己的游戏类型为俄罗斯方块游戏结束\");\r\n                }\r\n                //暂停游戏\r\n                cc.director.pause();\r\n                break;\r\n            //服务器断开我的链接\r\n            case \"relink\":\r\n                \r\n                break;    \r\n\r\n        }\r\n    }\r\n    else\r\n    {\r\n        cc.find(\"PebmanentNode\").getComponent(cc.Label).string=\"此用户为非法用户\";\r\n    }\r\n   },\r\n    //初始化地图\r\n    initMapForTwoAndFour : function(nameEnemy,userInfoScript,gameType){\r\n        cc.find(\"Canvas/rivalInfo/rivalName\").getComponent(cc.Label).string = nameEnemy;\r\n        var rivalIconNode = cc.find(\"Canvas/rivalInfo/rivalIcon\");\r\n        if(cc.sys.isNative){\r\n            userInfoScript.LoadUserPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n        }\r\n        if(CC_WECHATGAME){\r\n            userInfoScript.LoadRivalPicture(userInfoScript.pictureEnemy,rivalIconNode);\r\n        }\r\n        //加载用户头像\r\n        var userIconNode = cc.find(\"Canvas/userIcon\");\r\n        userInfoScript.LoadUserPicture(userInfoScript.pictureUser,userIconNode);\r\n        //当前的游戏类型为1初始化地图\r\n        if(gameType === \"1\"){\r\n\r\n        }else{\r\n            cc.find(\"Canvas/rivalGame\").getComponent(\"RivalGame\").initMap(12,6,gameType);\r\n        }\r\n    },\r\n    start () {\r\n    \r\n    },\r\n    update (dt) {\r\n        // var userInfoScript = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\");\r\n        // //监听Game4Fight的isTouch看看对手是否触底\r\n        // var rivalGameType = userInfoScript.rivalGameType;\r\n        // var userGameType = userInfoScript.nGameType;\r\n        // //是否能够发送惩罚消息到服务器\r\n        // this.canSendDataForDisappear = false;\r\n        // if(userGameType === \"2\" || userGameType === \"4\"){\r\n        //     //检查对手的游戏类型\r\n        //     switch(rivalGameType){\r\n        //         case \"1\":\r\n        //             break;\r\n        //         case \"2\":\r\n        //             break;\r\n        //         case \"3\":\r\n        //             break;\r\n        //         case \"4\":\r\n        //             //检查对手画像方块游戏方块是否触底\r\n        //             this.canSendDataForDisappear = cc.find(\"Canvas/Game\").getComponent(\"Game4Fight\").isTouch;\r\n        //             //如果对手触底发送数据到服务器\r\n        //             if(this.canSendDataForDisappear){\r\n                        \r\n        //             }\r\n        //     }\r\n        // }\r\n        // //如果对手已经触底\r\n        // if(this.canSendDataForDisappear){\r\n\r\n        // }\r\n        \r\n\r\n    },\r\n});\r\n"]}