{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\ChooseGame/assets\\Scripts\\ChooseGame\\MatchState.js"],"names":["cc","Class","extends","Component","properties","userNameLabel","Label","rivalNameLabel","countDownAudio","default","url","AudioClip","clickAudio","backBtn","Node","onLoad","string","find","getComponent","nameUser","director","isPaused","console","log","resume","matchSuccess","showCountDown","nSuccessTime","startTime","node","getChildByName","active","UserState","sceneArr","i","length","preLoadGameScene","progress","resource","sceneLoad","CC_WECHATGAME","self","urls","type","clearAll","loader","load","progressCallback","bind","completeCallback","u","release","completedCount","totalCount","res","err","texture","gameSceneName","preloadScene","LoadTwoUser","pictureUser","start","backGame","audioEngine","play","jsonData","tag1","score","state1","changeMapList1","removeMapList1","nMapRow","nMapCol","loading1","SendLongMsg","loadScene","update","dt","rivalName","playAudio","gameType","nGameType","audioUrl","share","shareFriends","sys","isNative","nativeShare"],"mappings":"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","file":"MatchState.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\ChooseGame","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        // //获取用户名字节点\r\n        // nodeName:{\r\n        //     default:null,\r\n        //     type:cc.Node\r\n        // },\r\n        // //获取用户头像节点\r\n        // nodePicture:{\r\n        //     default:null,\r\n        //     type:cc.Node\r\n        // },\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        userNameLabel : cc.Label,\r\n        rivalNameLabel : cc.Label,\r\n        countDownAudio : {\r\n            default : null,\r\n            url     : cc.AudioClip,\r\n        },\r\n        clickAudio : {\r\n            default : null,\r\n            url     : cc.AudioClip,\r\n        },\r\n        backBtn     : cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.userNameLabel.string = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nameUser;\r\n        if(cc.director.isPaused){\r\n            //如果游戏暂停了就恢复游戏\r\n            console.log(\"匹配界面暂停了\");\r\n            cc.director.resume();\r\n        }\r\n        //判断是否匹配成功\r\n        this.matchSuccess=false;\r\n        //显示倒计时\r\n        this.showCountDown = 0;\r\n          //初始化计时器\r\n        this.nSuccessTime=0;\r\n        //倒计时的开始时间\r\n        this.startTime = 5;\r\n        this.node.getChildByName(\"countDown\").active = false;\r\n        this.UserState();\r\n        //预加载游戏场景\r\n        var sceneArr = [\"PersonsGame1\",\"FightFigure\"];\r\n        for(let i = 0;i < sceneArr.length;i++){\r\n            this.preLoadGameScene(sceneArr[i]);\r\n        }\r\n        this.progress = 0;\r\n        this.resource = null;\r\n        this.sceneLoad = false;\r\n        //下载部分资源加快进入场景流程\r\n        if(CC_WECHATGAME){\r\n            var self = this;\r\n            this.urls = [\r\n                {url : 'res/raw-assets/Textures/cPart/tetrisbg.81dbd.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/pink/44.1d79a.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/10.b6d8f.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/9.44e42.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/11.68a0f.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/7.cebf4.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/14.7af40.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/13.03702.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/12.8986b.png',type : 'png'},\r\n                {url : 'res/raw-assets/Textures/bPart/yellow/8.10c64.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/-1.33262.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/7.cebf4.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/8.10c64.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/9.44e42.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/10.b6d8f.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/11.68a0f.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/12.8986b.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/13.03702.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/Game4/14.7af40.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/0.1d79a.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/1.c4498.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/2.ad5ec.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/3.8a1f4.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/4.036f4.png',type : 'png'},\r\n                {url : 'res/raw-assets/resources/picture/5.d7fd4.png',type : 'png'},\r\n            ];\r\n            this.clearAll();\r\n            cc.loader.load(self.urls,self.progressCallback.bind(self),self.completeCallback.bind(self));\r\n        }\r\n    },\r\n    clearAll : function(){\r\n        for(let i = 0;i < this.urls.length;i++){\r\n            let u = this.urls[i];\r\n            cc.loader.release(u);\r\n        }\r\n    },\r\n    progressCallback : function(completedCount,totalCount,res){\r\n        console.log(\"进入回调函数\");\r\n        console.log(\"已经完成的数量\",completedCount);\r\n        console.log(\"资源的总数量\",totalCount);\r\n        this.progress = completedCount/totalCount;\r\n        console.log(\"进度是：\",this.progress);\r\n        this.resource = res;\r\n    },\r\n    completeCallback : function(err,texture){\r\n        if(err){\r\n            console.log(\"下载图片失败\");\r\n        }\r\n        console.log(\"texture is \",texture);\r\n    },\r\n    //预加载所有游戏场景\r\n    preLoadGameScene : function(gameSceneName){\r\n        cc.director.preloadScene(gameSceneName,function(){\r\n            console.log(gameSceneName + \"场景预加载成功\");\r\n        });\r\n    },\r\n    //判断玩家的匹配状态\r\n    UserState:function(){\r\n        //匹配状态加载两个头像加载自己的头像\r\n        cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").LoadTwoUser(cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser,\r\n        cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").pictureUser,cc.find(\"UserName\"),cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nameUser,cc.find(\"UserPicture1\"),cc.find(\"UserPicture\"));\r\n    },\r\n    start () {\r\n\r\n    },\r\n    backGame : function(){\r\n        cc.audioEngine.play(this.clickAudio,false,1);\r\n        //发送数据到服务器告诉他我退出匹配\r\n        var jsonData = {\r\n            tag1            : 14,\r\n            score           : \"\",\r\n            type            : \"\",\r\n            state1          : \"\",\r\n            changeMapList1  : [],\r\n            removeMapList1  : 0,\r\n            nMapRow         : \"\",\r\n            nMapCol         : \"\",\r\n            loading1        : \"\",\r\n        }\r\n        cc.find(\"PebmanentNode\").getComponent(\"GetServer\").SendLongMsg(jsonData);\r\n        cc.director.loadScene(\"PersonsChoose\");\r\n    },\r\n    update (dt) {\r\n        //五秒时间里下载所需要的资源\r\n        console.log(\"--->>>>>>this.matchSuccess is \",this.matchSuccess);\r\n        if(this.matchSuccess)\r\n        {\r\n            console.log(\"匹配成功了%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n            //隐藏back按钮\r\n            this.backBtn.active = false;\r\n            if(cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").rivalName !== \"\")\r\n                this.rivalNameLabel.string = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").rivalName;\r\n            this.node.getChildByName(\"countDown\").active = true;\r\n            //将倒计时显示出来\r\n            this.showCountDown += dt;\r\n            this.nSuccessTime +=dt;\r\n            if(this.showCountDown >= 1 && this.startTime != 0){\r\n                this.playAudio(this.countDownAudio);\r\n                this.node.getChildByName(\"countDown\").getComponent(cc.Label).string = --this.startTime + \"s进入游戏\";\r\n                this.showCountDown = 0;\r\n            }\r\n            if(this.nSuccessTime>=5)\r\n            {\r\n                //获得游戏该用户的游戏类型根据用户的游戏类型跳转到各个不同的游戏场景\r\n                var gameType = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nGameType;\r\n                console.log(\"gameType is \" + gameType);\r\n                // gameType = gameType.toString();\r\n                console.log(typeof gameType);\r\n                switch(gameType){\r\n                    //如果游戏类型是俄罗斯方块的话加载网络版俄罗斯方块\r\n                    case \"1\":\r\n                        console.log(\"游戏类型为俄罗斯\");\r\n                        this.nSuccessTime = 0;\r\n                        cc.director.loadScene(\"PersonsGame1\");\r\n                        break;\r\n                        //如果是宝石方块的话就加载网络版的宝石方块    \r\n                    case \"2\":\r\n                        this.nSuccessTime = 0;\r\n                        cc.director.loadScene(\"FightStone\");\r\n                        break;\r\n                    case \"3\":\r\n                        break;\r\n                        //如果是画像方块的话就加载网络版的画像方块\r\n                    case \"4\":\r\n                        this.nSuccessTime = 0;\r\n                        cc.director.loadScene(\"FightFigure\");\r\n                        //初始化敌人地图和自己的地图\r\n                        break;\r\n                }\r\n                \r\n            }\r\n        }\r\n    },\r\n    //播放音效\r\n    playAudio : function(audioUrl){\r\n        cc.audioEngine.play(audioUrl,false,1);\r\n    },\r\n    //分享方法\r\n    share : function(){\r\n        if(CC_WECHATGAME){\r\n            console.log(\"首页share\");\r\n            cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").shareFriends();\r\n        }else if(cc.sys.isNative){\r\n            //原生平台分享\r\n            cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nativeShare();\r\n        }\r\n    }\r\n});\r\n"]}