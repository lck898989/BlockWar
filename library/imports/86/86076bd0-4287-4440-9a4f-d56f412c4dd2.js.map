{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\game4/assets\\Scripts\\game4\\game4.js"],"names":["comm","require","game3","statuMachine","cc","Class","extends","Component","properties","imagePrefabArr","default","type","Prefab","girdSize","back","nextShape","Node","next2","downButton","slideButton","rotateButton","mask","pauseMenu","pauseBack","pauseContinue","pauseRestart","nickName","scoreLabel","overMenu","icon","gameOverAnimation","gameSlide","clickAudio","url","AudioClip","loseAudio","removeAudio","downAudio","darkNode","handNode","noticePrefab","onLoad","showNoticeHelp","noticeBtn","setPrefabPosition","node","parent","getChildByName","console","log","getComponent","Label","string","on","active","bind","director","isPaused","resume","sys","isNative","CC_WECHATGAME","userInfoScript","find","nameUser","LoadUserPicture","pictureUser","totalRemoveTime","totalTime","normalSpeed","quickSpeed","nodeHeight","height","nodeWidth","width","initMap","nodeArr","initImage","createRandomX","createRandom","createNext","times","iState","registerKeyBoard","quick","time","xltime","cishu","playAudio","children","opacity","gameOver","status","Array","prototype","contain","undefined","i","length","x","y","tempNodes","san","score","overCost","nCol","loadScene","screenAdapt","invalidRemoveTime","onSlide","onGameSlide","self","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","event","slidePositionX","slidePosition","getLocation","gameSlidePosition","Promise","resolve","reject","setTimeout","getTouchLine","touchNode","worldPosition","localX","convertToNodeSpaceAR","v2","n1","Math","floor","n2","keyCode","KEY","down","left","moveLeft","right","moveRight","f","rotate","onDestroy","off","start","randomNumber","backGroundArr","min","max","random","map","MAP_ROW","tempY","Number","toFixed","j","MAP_COL","outArr","mapData","tempX","tempPrefab","isFilled","innerNode","parentNode","randomCol","prefabArrTemp","isCreateOver","index","controlRandom","prefabNode","createPrefab","col","row","addChild","push","id","rnd","next2Block","nextBlock","generateNext","showNextShape","childrenCount","k","destroy","prefab","instantiate","getColumn","indexGrid","chooseColumnByLocation","getRow","yIndexResult","chooseRawByLocation","getNodeArrMaxCol","maxCol","colArr","apply","getNodeArrMinCol","minCol","shareButton","shareFriends","update","dt","column","STATE_BEGIN","STATE_PLAY","xhr","XMLHttpRequest","onreadystatechange","readyState","response","responseText","open","send","sendData","tag1","updatePrefatY","interactable","animation","Animation","play","localStorage","getItem","setItem","figureTopScore","toString","postMessage","CheckIsDown","next","changeMap","removeTime","n","checkNodeArr","waitQueue","canRemove","isRemove","splice","addScore","remove","hasDown","result","queue","m","tempArr","cRow","cCol","cType","nodeType","waitQueueLength","waitDownArr","upFindNodes","activeNode","deleteNodeFromParent","afterRemoveDown","scheduleOnce","activeNodeArr","checkHasSealBlock","shine","directionArr","crow","ccol","anim","isActive","name","dynamicLoad","nodeName","callback","err","spriteFrame","Sprite","test","loader","loadRes","SpriteFrame","arr","arguments","upNode","round","checkType","waitDeleteNode","remainTwoNumber","x0","y0","x0Row","x0Col","rotate45X","cos","PI","sin","rotate45Y","nodeAngle","angle","canAction","changeRotateCenter","checkIsRotate","bezier","dealRotate","pro","cb","bezierAction","bezierTo","runAction","angleCode","rotate90X","rotate90Y","p","canRotate","x00","y00","x00Row","x00Col","xx","yy","rotate45Xc","rotate45Yc","checkIsRotateByRotateCenter","centerRow","centerCol","CheckIsLeft","leftMove","CheckIsRight","rightMove","checkIsBottom","checkDown","targetNode","targetRow","findTheNodeDown","quickDown","count1","count0","nodeDownIsZero","xArr","rowArr","minX","maxX","pause","audioUrl","audioEngine","currentWidth","getWinSize","winWidth","view","getFrameSize"],"mappings":"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","file":"game4.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\game4","sourcesContent":["/*\r\n * @Author: mikey.zhaopeng \r\n * @Date: 2018-06-19 19:29:08 \r\n * @Last Modified by: mikey.zhaopeng\r\n * @Last Modified time: 2018-08-20 10:39:46\r\n */\r\nvar comm = require(\"../game3/Common\");\r\nvar game3 = require(\"../game3/game\");\r\nvar statuMachine = require(\"./StatuMachine\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        imagePrefabArr : {\r\n            default : [],\r\n            type    : [cc.Prefab],\r\n        },\r\n        girdSize    : 120,\r\n        back        : cc.Prefab,\r\n        nextShape : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        next2 : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        downButton : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        slideButton : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        rotateButton : {\r\n            default  : null,\r\n            type     : cc.Node,\r\n        },\r\n        //遮罩层\r\n        mask : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        //暂停菜单\r\n        pauseMenu : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        pauseBack      : cc.Node,\r\n        pauseContinue  : cc.Node,\r\n        pauseRestart   : cc.Node,\r\n        //昵称label\r\n        nickName : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        //分数label\r\n        scoreLabel : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        //游戏结束菜单\r\n        overMenu  : {\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        //用户头像\r\n        icon     :{\r\n            default : null,\r\n            type    : cc.Node,\r\n        },\r\n        gameOverAnimation : cc.Node,\r\n        gameSlide : cc.Node,\r\n        //点击按钮的声音\r\n        clickAudio : {\r\n            url  : cc.AudioClip,\r\n            default : null,\r\n        },\r\n        //失败音效\r\n        loseAudio : {\r\n            url  : cc.AudioClip,\r\n            default : null,\r\n        },\r\n        //消除音效\r\n        removeAudio : {\r\n            url  : cc.AudioClip,\r\n            default : null,\r\n        },\r\n        //快速下落音效\r\n        downAudio : {\r\n            url  : cc.AudioClip,\r\n            default : null,\r\n        },\r\n        darkNode : cc.Node,\r\n        handNode : cc.Node,\r\n        noticePrefab : cc.Prefab,\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.showNoticeHelp = true;\r\n        //初始化提示预制体\r\n        this.noticeBtn = this.setPrefabPosition(this.noticePrefab,0,0,this.node.parent.getChildByName(\"darkNotice\"));\r\n        console.log(\"this.noticeBtn is \",this.noticeBtn);\r\n        this.noticeBtn.getChildByName(\"wodNotice\").getChildByName(\"dynamicWords\").getComponent(cc.Label).string = \"随着消除次数的增加，方块的小落速度\\n\"\r\n        + \"随之增加,要掌控住方块的速度哦！\";\r\n        this.noticeBtn.on(\"touchstart\",function(){\r\n            this.darkNode.active = false;\r\n            this.handNode.active = false;\r\n            this.noticeBtn.active = false;\r\n            this.showNoticeHelp = false;\r\n        }.bind(this))\r\n        this.darkNode.on(\"touchstart\",function(){\r\n            this.darkNode.active = false;\r\n            this.handNode.active = false;\r\n            this.noticeBtn.active = false;\r\n            this.showNoticeHelp = false;\r\n        }.bind(this));\r\n        this.handNode.on(\"touchstart\",function(){\r\n            this.darkNode.active = false;\r\n            this.handNode.active = false;\r\n            this.noticeBtn.active = false;\r\n            this.showNoticeHelp = false;\r\n        }.bind(this));\r\n        if(cc.director.isPaused()){\r\n            cc.director.resume();\r\n        }\r\n        if(cc.sys.isNative){\r\n            // var userInfoScript = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\");\r\n            // this.nickName.getComponent(cc.Label).string = userInfoScript.nameUser;\r\n            // userInfoScript.LoadUserPicture(userInfoScript.pictureUser,this.icon);\r\n        }\r\n        if(CC_WECHATGAME){\r\n            var userInfoScript = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\");\r\n            this.nickName.getComponent(cc.Label).string = userInfoScript.nameUser;\r\n            userInfoScript.LoadUserPicture(userInfoScript.pictureUser,this.icon);\r\n        }\r\n        this.totalRemoveTime = 0;\r\n        this.totalTime = 0;\r\n        this.normalSpeed = 0.8,\r\n        this.quickSpeed  = 0.07,\r\n         this.nodeHeight = this.node.height;\r\n         this.nodeWidth = this.node.width;\r\n         this.initMap();\r\n         //创建一个空节点用来盛放生成的预制体\r\n         this.nodeArr = this.initImage(this.node,this.createRandomX(this.createRandom(0,6)),this.nodeHeight/2 - this.girdSize/2);\r\n         this.createNext();\r\n         //从游戏屏幕上下落的次数\r\n         this.times = 0;\r\n        //  //开始下落\r\n        //  this.downFunction(this.nodeArr,1);\r\n         this.iState = 0;\r\n         this.totalTime = 0;\r\n         this.registerKeyBoard();\r\n         this.quick = false;\r\n         this.time = 0;\r\n         this.xltime = this.normalSpeed;\r\n         this.cishu = 0;\r\n         //监听下落按钮按下的时候\r\n         this.downButton.on(\"touchstart\",function(){\r\n            this.playAudio(this.downAudio);\r\n            this.xltime = this.quickSpeed;\r\n            this.downButton.children[0].opacity = 120;\r\n            this.playAudio(this.clickAudio);\r\n         }.bind(this));\r\n         //下落按钮离开时候\r\n         this.downButton.on(\"touchend\",function(){\r\n            this.xltime = this.normalSpeed;\r\n            this.downButton.children[0].opacity = 0;\r\n         }.bind(this));\r\n         this.gameOver = false;\r\n         this.status = 0;\r\n         Array.prototype.contain = function(node){\r\n            if(node != undefined){\r\n                for(var i = 0;i<this.length;i++){\r\n                    if(this[i].x === node.x && this[i].y === node.y && this[i].getComponent(\"Figure\").type === node.getComponent(\"Figure\").type){\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            return false;\r\n        };\r\n        this.tempNodes = [];\r\n        this.san = 0;\r\n        //计分数字\r\n        this.score = 0;\r\n        //旋转按钮旋转\r\n        // var rotateAction = cc.rotateBy(3,360).easing(cc.easeCubicActionOut());\r\n        // var rf = cc.repeatForever(rotateAction);\r\n        // this.rotateButton.runAction(rf);\r\n\r\n        // Menu.prototype.onLoad();\r\n\r\n        //不显示遮罩层\r\n        this.mask.active = false;\r\n        //暂停菜单不显示\r\n        this.pauseMenu.active = false;\r\n        //不显示游戏结束菜单\r\n        this.overMenu.active = false;\r\n\r\n        //游戏结束计时\r\n        this.overCost = 0;\r\n        //当前的行号\r\n        this.nCol = 0;\r\n        this.gameOverAnimation.active = false;\r\n        this.pauseBack.on(\"touchstart\",function(){\r\n            console.log(\"暂停页面的退出\");\r\n            cc.director.resume();\r\n            cc.director.loadScene(\"OneChoose\");\r\n            // cc.director.resume();\r\n            // this.mask.active = false;\r\n            // this.pauseMenu.active = false;\r\n            \r\n        }.bind(this));\r\n        this.pauseContinue.on(\"touchstart\",function(){\r\n            console.log(\"暂停页面的继续\");\r\n            cc.director.resume();\r\n            this.mask.active = false;\r\n            this.pauseMenu.active = false;\r\n        }.bind(this));\r\n        this.pauseRestart.on(\"touchstart\",function(){\r\n            console.log(\"暂停页面的重新开始\");\r\n            cc.director.resume();\r\n            this.mask.active = false;\r\n            this.pauseMenu.active = false;\r\n            cc.director.loadScene(\"Game4\");\r\n        }.bind(this));\r\n        // this.pauseMenu.getChildByName(\"continue\").on(\"touchstart\",function(){\r\n        //     cc.director.resume();\r\n        //     this.mask.active = false;\r\n        //     this.pauseMenu.active = false;\r\n        // }.bind(this));\r\n        // this.pauseMenu.getChildByName(\"back\").on(\"touchstart\",function(){\r\n        //    this.mask.active = false;\r\n        //    this.pauseMenu.active = false;\r\n        //    cc.director.loadScene(\"OneChoose\");\r\n        // }.bind(this));\r\n        // this.pauseMenu.getChildByName(\"restart\").on(\"touchstart\",function(){\r\n        //     cc.director.resume();\r\n        //     this.mask.active = false;\r\n        //     this.pauseMenu.active = false;\r\n        //     cc.director.loadScene(\"Game4\");\r\n        // }.bind(this));\r\n        this.screenAdapt();\r\n        //单机的网络版超时时间防止自己被踢出\r\n        this.invalidRemoveTime = 0;\r\n    },\r\n    registerKeyBoard : function(){\r\n        //是否在滑动节点上\r\n        this.onSlide = false;\r\n        this.onGameSlide = false;\r\n        var self = this;\r\n        //注册键盘监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n        //滑动按钮监听\r\n        this.slideButton.on(\"touchstart\",function(event){\r\n            // this.onSlide = true;\r\n            //获得当前点击的全局坐标\r\n            this.slideButton.children[0].opacity = 120;\r\n            // self.slidePosition = event.getLocation();\r\n            cc.log(\"self.slidePositionX is \" + self.slidePositionX);\r\n        }.bind(this));\r\n        //在滑动节点上移动的时候\r\n        this.slideButton.on(\"touchmove\",function(event){\r\n            this.onSlide = true;\r\n            //获得当前点击的全局坐标\r\n            this.slideButton.children[0].opacity = 120;\r\n            self.slidePosition = event.getLocation();\r\n            cc.log(\"slidePositionX is \" + self.slidePositionX);\r\n        }.bind(this));\r\n        this.slideButton.on(\"touchcancel\",function(event){\r\n            //获得当前点击的全局坐标\r\n            this.slideButton.children[0].opacity = 0;\r\n            self.slidePosition = event.getLocation();\r\n            this.onSlide = false;\r\n        }.bind(this));\r\n        //在滑动节点上离开的时候\r\n        this.slideButton.on(\"touchend\",function(event){\r\n             //获得当前点击的全局坐标\r\n            this.slideButton.children[0].opacity = 0;\r\n            self.slidePosition = event.getLocation();\r\n            this.onSlide = true;\r\n        }.bind(this));\r\n\r\n         // 滑动节点上方的空节点\r\n         this.gameSlide.on(\"touchstart\",function(event){\r\n            cc.log(\"点击了gameSlide节点\");\r\n        }.bind(this));\r\n        this.gameSlide.on(\"touchmove\",function(event){\r\n            this.onGameSlide = true;\r\n            self.gameSlidePosition = event.getLocation();\r\n        }.bind(this));\r\n        this.gameSlide.on(\"touchend\",function(event){\r\n            this.onGameSlide = true;\r\n            self.gameSlidePosition = event.getLocation();\r\n        }.bind(this));\r\n        this.gameSlide.on(\"touchcancel\",function(event){\r\n            this.onGameSlide = false;\r\n            self.gameSlidePosition = event.getLocation();\r\n        }.bind(this));\r\n        function time(){\r\n            return new Promise(function(resolve,reject){\r\n                setTimeout(function(){\r\n                    console.log(\"aaaaaaaaaaa\")\r\n                    resolve(\"aaa\");\r\n                },3000)\r\n            })\r\n        }\r\n        (function(){\r\n            time();\r\n            console.log(\"$$$$$$$$$$$$$$$$$$$$$$$$$\");\r\n        })();\r\n    },\r\n    //返回触点对应的列数\r\n    getTouchLine : function(touchNode,worldPosition){\r\n         //将触点的x坐标转化为本地坐标系\r\n         var localX = touchNode.convertToNodeSpaceAR(cc.v2(worldPosition.x,worldPosition.y)).x;\r\n         cc.log(\"local is \" + localX);\r\n         if(localX > 0){\r\n              var n1 = Math.floor(localX/(touchNode.width/6));\r\n              if(n1 >= 0 && n1 < 1){\r\n                  this.nCol = 3;\r\n              }else if(n1 >= 1 && n1 < 2){\r\n                  this.nCol = 4;\r\n              }else if(n1 >= 2 && n1 < 3){\r\n                  this.nCol = 5;\r\n              }\r\n         }else if(localX < 0){\r\n             var n2 = Math.floor(-localX/(touchNode.width/6));\r\n             if(n2 >= 0 && n2 < 1){\r\n                this.nCol = 2;\r\n            }else if(n2 >= 1 && n2 < 2){\r\n                this.nCol = 1;\r\n            }else if(n2 >= 2 && n2 < 3){\r\n                this.nCol = 0;\r\n            }\r\n         }\r\n         return this.nCol;\r\n    },\r\n    onKeyDown : function(event){\r\n        switch(event.keyCode){\r\n            case cc.KEY.down:\r\n                this.xltime = this.quickSpeed;\r\n                 break;\r\n            case cc.KEY.left:\r\n                 this.moveLeft();\r\n                 cc.log(\"<-----\");\r\n                 break;\r\n            case cc.KEY.right:\r\n                 this.moveRight();\r\n                 cc.log(\"----->\");\r\n                 break;  \r\n            case cc.KEY.f:\r\n                 this.rotate();\r\n                 //旋转操作\r\n                 break;                  \r\n        }\r\n    },\r\n    onKeyUp   : function(event){\r\n        switch(event.keyCode){\r\n            case cc.KEY.down:\r\n                this.xltime = this.normalSpeed;\r\n                 break;\r\n            case cc.KEY.left:\r\n                 break;\r\n            case cc.KEY.right:\r\n                 break;  \r\n            case cc.KEY.f:\r\n                 //旋转操作\r\n                 break;                 \r\n        }\r\n    },\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n    start () {\r\n\r\n    },\r\n    createRandomX : function(randomNumber){\r\n        return this.backGroundArr[0][randomNumber];\r\n    },\r\n    //产生随机数\r\n    createRandom : function(min,max){\r\n         return Math.floor(Math.random()*(max - min) + min);\r\n    },\r\n    //初始化游戏场景主背景12行6列的网格\r\n    initMap : function(){\r\n        //初始化y坐标\r\n        var y = this.nodeHeight/2 - this.girdSize/2 - 12;\r\n        //初始化x坐标\r\n        var x = -this.nodeWidth/2 + this.girdSize/2 + 10;\r\n        cc.log(\"x is \" + x);\r\n        this.backGroundArr = [];\r\n        this.map = [];\r\n        //12行6列的网格\r\n        for(var i = 0;i < comm.MAP_ROW; i++){\r\n            //设置它的y坐标\r\n            var tempY =y - i * this.girdSize - 1;\r\n            tempY = Number(tempY.toFixed(2));\r\n            cc.log(\"tempY is \" + tempY);\r\n            this.backGroundArr[i] = [];\r\n            this.map[i] = [];\r\n            for(var j = 0; j < comm.MAP_COL;j++){\r\n                var outArr = this.backGroundArr[i];\r\n                var mapData = this.map[i];\r\n                var tempX = x + j * this.girdSize + 1;\r\n                tempX = Number(tempX.toFixed(2));\r\n                cc.log(\"tempX is \" + tempX);\r\n                //y坐标不变，x坐标要变\r\n                var tempPrefab = this.setPrefabPosition(this.back,tempX,tempY,this.node);\r\n                // var node = new Shape(tempPrefab,-1);\r\n                tempPrefab.getComponent(\"Back\").isFilled = 0;\r\n                // tempPrefab.isFilled = 0;\r\n                // cc.log(\"tempPrefab.isFilled is \" + tempPrefab.isFilled);\r\n                tempPrefab.getComponent(\"Back\").type = -1;\r\n                tempPrefab.getComponent(\"Back\").innerNode = null;\r\n                // var shape = new Shape(tempPrefab,-1);\r\n                outArr[j]=tempPrefab;\r\n                mapData[j] = 0;\r\n            }\r\n        }\r\n        cc.log(\"backGroundArr is \" +this.backGroundArr);\r\n    },\r\n    //生成形状在这个节点数组中加入父节点\r\n    initImage : function(parentNode){\r\n        this.times = 0;\r\n        //动态生成一个新的节点将生成的预制体节点加入到该父节点上\r\n        // var newNode = new cc.Node();\r\n        // parentNode.addChild(newNode);\r\n        //用来存放预制体的数组\r\n        //定义从哪一列开始下落\r\n        var randomCol = game3.prototype.createRandom(2,4);\r\n        var prefabArrTemp = [];\r\n        this.cishu  = 0;\r\n        //是否生成成功并且全部显示完毕\r\n        this.isCreateOver = false;\r\n        //从上往下生成\r\n        // var y = this.nodeHeight/2 + this.girdSize/2+1*this.girdSize;\r\n        for(var i = 0;i < 2;i++){\r\n            // var offSet = i * this.prefabHeight;\r\n            // cc.log(\"offSet is \" + offSet);\r\n            // //产生0-8的随机数\r\n            var index = this.controlRandom();\r\n            // //将对应的颜色索引存放到该数组中\r\n            // // this.boxColorArr.push(this.prefabArr[index].color);\r\n            // cc.log(\"index is \" + index);\r\n            // //将对应的预制体取出来转化为节点然后显示\r\n            var prefabNode = game3.prototype.createPrefab(this.imagePrefabArr[index]);\r\n            // cc.log(\"x is \" + x + \" and y is \"+ y - offSet);\r\n            //设置预制节点的位置\r\n            // prefabNode.setPosition(this.backGroundArr[0][randomCol].x,this.backGroundArr[0][randomCol].y);\r\n            prefabNode.x = this.backGroundArr[0][randomCol].x;\r\n            prefabNode.y = this.backGroundArr[0][randomCol].y;\r\n            cc.log(\"prefabNode is \" + prefabNode);\r\n            prefabNode.getComponent(\"Figure\").type = index;\r\n            prefabNode.getComponent(\"Figure\").col = randomCol;\r\n            prefabNode.getComponent(\"Figure\").row = 0;\r\n            prefabNode.active = false;\r\n            // this.backGroundArr[i][randomCol].node = prefabNode;\r\n            cc.log(\"------type is \" + prefabNode.getComponent(\"Figure\").type);\r\n            //将该预制节点添加为parentNode的孩子\r\n            parentNode.addChild(prefabNode);\r\n            // var shape = new Shape(prefabNode,index);\r\n            //将当前预制体节点存放到预制体临时数组里面\r\n            prefabArrTemp.push(prefabNode);\r\n        }\r\n        console.log(prefabArrTemp);\r\n        //生成父节点\r\n        return prefabArrTemp;\r\n    },\r\n    //改变随机数出现的概率\r\n    controlRandom : function(){\r\n        var id;\r\n        var rnd = Math.random();\r\n        if(rnd < 0.2){\r\n            id = 0;\r\n        }else if(rnd < 0.4){\r\n            id = 1;\r\n        }else if(rnd < 0.6){\r\n            id = 2;\r\n        }else if(rnd < 0.8){\r\n            id = 3;\r\n        }else if(rnd < 0.85){\r\n            id = 4;\r\n        }else if(rnd < 0.9){\r\n            id = 5;\r\n        }else if(rnd < 0.95){\r\n            id = 6;\r\n        }else if(rnd < 1){\r\n            id = 7;\r\n        }\r\n        return id;\r\n    },\r\n    //生成下一个形状\r\n    createNext : function(){\r\n        if(this.next2Block === undefined){\r\n            this.nextBlock = this.generateNext(this.node);\r\n            //显示下一个形状\r\n            this.showNextShape(this.nextBlock,this.nextShape);\r\n        }else{\r\n            this.nextBlock = this.next2Block;\r\n            this.showNextShape(this.nextBlock,this.nextShape);\r\n        }\r\n        //生成下下个形状\r\n        this.next2Block = this.generateNext(this.node);\r\n        //显示下下个形状\r\n        this.showNextShape(this.next2Block,this.next2);\r\n    },\r\n    //生成下一个形状\r\n    generateNext : function(parentNode){\r\n        return this.initImage(parentNode);\r\n    },\r\n    //显示下一个形状\r\n    showNextShape : function(nextBlock,parentNode){\r\n        //显示下一个形状之前删除这个节点的所有子节点\r\n        if(parentNode.childrenCount > 0){\r\n            for(let k = 0;k<parentNode.childrenCount;k++){\r\n                //销毁该子节点,如果销毁节点成功的话就显示下一个形状\r\n                parentNode.children[k].destroy();\r\n            }\r\n        }\r\n        //依次生成预制节点组成的节点数组\r\n        for(let i = 0;i<2;i++){\r\n            var type = nextBlock[i].getComponent(\"Figure\").type;\r\n            // var spriteFrame = nextBlock[i].getComponent(\"cc.Sprite\").spriteFrame;\r\n            this.setPrefabPosition(this.imagePrefabArr[type],0,100-i*this.girdSize,parentNode);\r\n        }\r\n        // for(let k = 0;k<3;k++){\r\n        //     var pre = ;\r\n        //     this.setPrefabPosition(,50,50+k*this.prefabHeight,this.nextShape);\r\n        // }\r\n    },\r\n     /**\r\n    @param prefab:将要生成预制节点的预制体\r\n    @param x     :将要生成预制节点的x坐标\r\n    @param y     :将要生成预制节点的y坐标\r\n    @param parentNode : 生成的预制节点的父节点\r\n     */\r\n    setPrefabPosition : function(prefab,x,y,parentNode){\r\n        var prefab = this.createPrefab(prefab);\r\n        // prefab.setPosition(x,y);\r\n        prefab.x = x;\r\n        prefab.y = y;\r\n        parentNode.addChild(prefab);\r\n        return prefab;\r\n    },\r\n    //创建一个预制体节点\r\n    createPrefab : function(prefab){\r\n        var prefabNode = cc.instantiate(prefab);\r\n        return prefabNode;\r\n    },\r\n    //查看当前的棍处于哪一列\r\n    getColumn : function(node){\r\n        //竖行的条\r\n        var indexGrid = this.chooseColumnByLocation(node.x);\r\n        //放回列号\r\n        return indexGrid;\r\n    },\r\n    //根据坐标选择位于哪个列\r\n    chooseColumnByLocation : function(x){\r\n        switch(x){\r\n            case this.backGroundArr[0][0].x:\r\n                return 0;\r\n            case this.backGroundArr[0][1].x:\r\n                return 1;\r\n            case this.backGroundArr[0][2].x: \r\n                return 2;\r\n            case this.backGroundArr[0][3].x: \r\n                return 3;\r\n            case this.backGroundArr[0][4].x:\r\n                return 4;\r\n            case this.backGroundArr[0][5].x:\r\n                return 5;                 \r\n        }\r\n    },\r\n    //根据坐标获得位于哪一行\r\n    getRow : function(node){\r\n        var yIndexResult;\r\n        cc.log(\"node is \" + node);\r\n        yIndexResult = this.chooseRawByLocation(node.y);\r\n        return yIndexResult;\r\n    },\r\n    /***\r\n        根据y坐标数值得到对应的行\r\n        返回对应的行数\r\n        @param : y 传入方法中的y坐标\r\n        @return 返回坐标对应的行号\r\n    * */\r\n    chooseRawByLocation : function(y){\r\n        switch(y){\r\n            case this.backGroundArr[11][0].y:\r\n                return 11;\r\n            case this.backGroundArr[10][0].y:\r\n                return 10;\r\n            case this.backGroundArr[9][0].y: \r\n                return 9;\r\n            case this.backGroundArr[8][0].y: \r\n                return 8;\r\n            case this.backGroundArr[7][0].y:\r\n                return 7;\r\n            case this.backGroundArr[6][0].y:\r\n                return 6;\r\n            case this.backGroundArr[5][0].y:\r\n                return 5;\r\n            case this.backGroundArr[4][0].y:\r\n                return 4;\r\n            case this.backGroundArr[3][0].y: \r\n                return 3;\r\n            case this.backGroundArr[2][0].y: \r\n                return 2;\r\n            case this.backGroundArr[1][0].y:\r\n                return 1;\r\n            case this.backGroundArr[0][0].y:\r\n                return 0;    \r\n        }\r\n    },\r\n    getNodeArrMaxCol : function(){\r\n        var maxCol;\r\n        var colArr = [];\r\n        for(let i = 0;i<this.nodeArr.length;i++){\r\n            colArr.push(this.nodeArr[i].getComponent(\"Figure\").col);\r\n        }\r\n        maxCol = Math.max.apply(Math,colArr);\r\n        //返回最大列\r\n        return maxCol;\r\n    },\r\n    getNodeArrMinCol : function(){\r\n        var minCol;\r\n        var colArr = [];\r\n        for(let i = 0;i<this.nodeArr.length;i++){\r\n            colArr.push(this.nodeArr[i].getComponent(\"Figure\").col);\r\n        }\r\n        minCol = Math.min.apply(Math,colArr);\r\n        //返回最小列\r\n        return minCol;\r\n\r\n    },\r\n    shareButton : function(){\r\n        if(CC_WECHATGAME){\r\n            console.log(\"首页share\");\r\n            cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").shareFriends();\r\n        }else if(cc.sys.isNative){\r\n            //原生平台分享\r\n            // cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nativeShare();\r\n        }\r\n    },\r\n    update (dt) {\r\n        if(!this.showNoticeHelp){\r\n            if(this.onSlide || this.onGameSlide){\r\n                if(this.onSlide){\r\n                    var column = this.getTouchLine(this.slideButton,this.slidePosition);\r\n                    this.onSlide = false;\r\n                }else{\r\n                    var column = this.getTouchLine(this.gameSlide,this.gameSlidePosition);\r\n                    this.onGameSlide = false;\r\n                }\r\n                //如果当前列比节点数组中最大列还大的话就右移\r\n                if(column > this.getNodeArrMaxCol()){\r\n                    //右移\r\n                    this.moveRight();\r\n                }else if(column < this.getNodeArrMinCol()){\r\n                    //左移\r\n                    this.moveLeft();\r\n                }\r\n            }\r\n            switch(this.status){\r\n                case statuMachine.STATE_BEGIN:\r\n                 cc.log(\"开始游戏\");\r\n                 break;\r\n                case statuMachine.STATE_PLAY:\r\n                 cc.log(\"游戏中\");  \r\n            }\r\n            //如果游戏结束了就不在进行下落\r\n            if(!this.gameOver){\r\n                this.invalidRemoveTime += dt;\r\n                //告诉服务器不要断开连接\r\n                if(this.invalidRemoveTime >= 60){\r\n                    console.log(\"发送给服务器消息防止自己不被踢出\");\r\n                    var url = 'https://m5.ykplay.com/KeepLink';\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.onreadystatechange = function () {\r\n                        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                            var response = xhr.responseText;\r\n                            console.log(response);\r\n                        }\r\n                    };\r\n                    xhr.open(\"GET\", url, true);\r\n                    xhr.send();\r\n                    //发送长连接请求\r\n                    if(cc.sys.isNative || (CC_WECHATGAME)){\r\n                        var sendData = {\r\n                            tag1 : 0,\r\n                            score : \"\",\r\n                            type : \"\"\r\n                        }\r\n                        // var dataString = JSON.stringify(sendData);\r\n                        // console.log(\"dataString is \",dataString);\r\n                        // cc.find(\"PebmanentNode\").getComponent(\"GetServer\").SendLongMsg(sendData);\r\n                    }\r\n                    this.invalidRemoveTime = 0;\r\n                }\r\n                this.san += dt;\r\n                this.time += dt;\r\n                if(this.cishu === 0 && this.xltime < this.normalSpeed){\r\n                    this.xltime = this.normalSpeed;\r\n                }\r\n                if(this.totalTime === 3){\r\n                    if(this.totalRemoveTime < 12){\r\n                        //提升下落速度\r\n                        this.normalSpeed -= 0.2;\r\n                    }\r\n                    this.totalTime = 0;\r\n                }\r\n                if(this.time > this.xltime){\r\n                    if(this.cishu < 2){\r\n                        //这种情况不让它旋转\r\n                        if(this.cishu === 0){\r\n                            if(this.map[0][this.nodeArr[1].getComponent(\"Figure\").col] === 1){\r\n                                this.gameOver = true;\r\n                            }else{\r\n                                this.nodeArr[1].active = true;\r\n                            }\r\n                        }else if(this.cishu === 1){\r\n                            if(this.map[1][this.nodeArr[1].getComponent(\"Figure\").col] != 1){\r\n                                this.nodeArr[1].y = this.backGroundArr[1][this.nodeArr[1].getComponent(\"Figure\").col].y;\r\n                                this.nodeArr[1].getComponent(\"Figure\").row = 1;\r\n                                this.nodeArr[0].active = true;\r\n                                this.nodeArr[0].y = this.backGroundArr[0][this.nodeArr[0].getComponent(\"Figure\").col].y;\r\n                                this.nodeArr[0].getComponent(\"Figure\").row = 0;\r\n                            }else{\r\n                                this.gameOver = true;\r\n                            }\r\n                        }\r\n                        this.cishu++;\r\n                        //表示节点数组已经生成完毕可以进行旋转操作\r\n                        if(this.cishu === 2){\r\n                            this.isCreateOver = true;\r\n                        }\r\n                    }else{\r\n                        \r\n                        this.updatePrefatY(this.nodeArr);\r\n                    }\r\n                    this.time = 0;\r\n                    \r\n                }\r\n            }else {\r\n                //其他下降，旋转按钮，左右移动按钮处于不可激活状态\r\n                this.downButton.interactable = false;\r\n                this.rotateButton.interactable = false;\r\n                // this.slideButton.interactable = false;\r\n                this.gameOverAnimation.active = true;\r\n                var animation = this.gameOverAnimation.getComponent(cc.Animation);\r\n                this.playAudio(this.loseAudio);\r\n                animation.play(\"Over_light\"); \r\n                this.overMenu.active = true;\r\n                //显示分数\r\n                this.overMenu.getChildByName(\"scoreValue\").getComponent(cc.Label).string = this.score;\r\n                //显示等级\r\n                this.overCost += dt;\r\n                if(cc.sys.localStorage.getItem('maxScoreFigure') === undefined){\r\n                    //设置值\r\n                    cc.sys.localStorage.setItem('maxScoreFigure',this.score);\r\n                }else{\r\n                    if(this.score > cc.sys.localStorage.getItem('maxScoreFigure')){\r\n                        console.log(\"即将保存到微信平台。。。\");\r\n                        //设置值\r\n                        cc.sys.localStorage.setItem('maxScoreFigure',this.score);\r\n                        //将最高分数保存起来\r\n                        cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").figureTopScore = this.score.toString();\r\n                        // let username = cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").nameUser;\r\n                        //将最高分上传到微信托管平台\r\n                        cc.find(\"PebmanentNode\").getComponent(\"UserInfo\").postMessage(\"SaveScore\",\"figureRankScore\",this.score.toString());\r\n                    }\r\n                    console.log(\"宝石方块的最高分是: \",cc.sys.localStorage.getItem('maxScoreFigure'));\r\n                }\r\n                if(this.overCost > 4){\r\n                    cc.director.loadScene(\"OneChoose\");\r\n                    this.overCost = 0;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //更新预制体节点的y坐标\r\n    updatePrefatY : function(nodeArr){\r\n                var self = this;\r\n                //如果允许下落的话条的y坐标向下移动\r\n                if(this.CheckIsDown(nodeArr)){\r\n                        //下落节点数组,如果是横向的话分开这连个节点\r\n                        this.down(nodeArr);\r\n                }else{\r\n                    //改变地图信息\r\n                    this.changeMap(this.nodeArr);\r\n\r\n                    var removeTime = 0;\r\n                    function next(){\r\n                        //生成下一个形状\r\n                        self.nodeArr = self.nextBlock;\r\n                        //生成下一个形状\r\n                        self.createNext();\r\n                    }\r\n                    (function(n){\r\n                        (function(){\r\n                            //查看这个节点数组中是否可以消除如果满足条件进行消除\r\n                            self.checkNodeArr(self.nodeArr,removeTime);\r\n                        })();\r\n                        n();\r\n                    })(next);\r\n                    \r\n                    \r\n                }\r\n    },\r\n    //检查一个节点数组是否满足消除条件\r\n    checkNodeArr : function(nodeArr,removeTime){\r\n        if(nodeArr.length > 0){\r\n            //临时数组存放待消节点\r\n            var waitQueue = [];\r\n            if(this.canRemove(nodeArr,waitQueue).isRemove){\r\n                //如果是可以消除的话进行消除这时候待消队列已经填满了节点\r\n                // this.remove(this.nodeArr);\r\n                //检测完这两个下落的方块的待消队列\r\n                for(let j = 0;j<waitQueue.length;j++){\r\n                    //如果该节点已经删除的话不对它操作\r\n                    if(waitQueue[j] === null){\r\n                        //将它从该数组删除\r\n                        waitQueue.splice(j,1);\r\n                    }\r\n                    //将这些待消除的标记为可消除的\r\n                    waitQueue[j].getComponent(\"Figure\").isRemove = true;\r\n                    \r\n                }\r\n                this.tempNodes = waitQueue;\r\n                //加分\r\n                this.addScore(waitQueue.length);\r\n                //该消除的消除该下落的下落\r\n                this.remove(waitQueue,removeTime);\r\n            }\r\n        }\r\n        \r\n    },\r\n    //改变地图信息\r\n    changeMap : function(nodeArr){\r\n        if(nodeArr.length > 0){\r\n            for(let k = 0;k<nodeArr.length;k++){\r\n                //将所有的坐标变成只保留两位小数的数字\r\n                nodeArr[k].x = Number(nodeArr[k].x.toFixed(2));\r\n                nodeArr[k].y = Number(nodeArr[k].y.toFixed(2));\r\n            }\r\n            for(let i = 0;i<nodeArr.length;i++){\r\n                //当前停止的节点对应的地图位置\r\n                var row = nodeArr[i].getComponent(\"Figure\").row;\r\n                var col = nodeArr[i].getComponent(\"Figure\").col;\r\n                //如果有块在停止的时候更新了地图就不在这里更新地图信息了\r\n                if(!nodeArr[i].getComponent(\"Figure\").hasDown){\r\n                    this.map[row][col] = 1;\r\n                    //将背景方格的属性状态改为该节点数组对应的类型\r\n                    this.backGroundArr[row][col].getComponent(\"Back\").type = nodeArr[i].getComponent(\"Figure\").type;\r\n                    this.backGroundArr[row][col].getComponent(\"Back\").innerNode = nodeArr[i];\r\n                }else{\r\n                    //将该节点的移动状态改为初始值\r\n                    nodeArr[i].getComponent(\"Figure\").hasDown = false;\r\n                }\r\n                \r\n            }\r\n                \r\n        }\r\n    },\r\n    //检查该节点数组是否可以消除\r\n    /**\r\n     * @param  {待检测的节点数组} nodeArr\r\n     * @param  {待消队列} waitQueue\r\n     * @return {JSON}    result\r\n     */\r\n    canRemove : function(nodeArr,waitQueue){\r\n        var result = {\r\n            isRemove : false,\r\n            queue    : null,\r\n        }\r\n        for(let m = 0;m < nodeArr.length;m++){\r\n            var tempArr = [];\r\n            var cRow = nodeArr[m].getComponent(\"Figure\").row;\r\n            var cCol = nodeArr[m].getComponent(\"Figure\").col;\r\n            var cType = nodeArr[m].getComponent(\"Figure\").type; \r\n            this.find(nodeArr[m],cRow,cCol,cType,tempArr);\r\n            if(tempArr.length >= 3){\r\n                for(let k = 0;k < tempArr.length;k++){\r\n                    var nodeType = tempArr[k].getComponent(\"Figure\").type;\r\n                    //画像方块的类型在0-3之间才允许加进去\r\n                    if(!waitQueue.contain(tempArr[k]) && (nodeType < 4 && nodeType >= 0)){\r\n                        //如果数组里面有这个节点的信息了说明已经加到数组里面了不用再重复加入了\r\n                        waitQueue.push(tempArr[k]);\r\n                    }else{\r\n                        cc.log(\"该类型不在加入的条件\");\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n        //递归的方式把待消队列找出来\r\n        if(waitQueue.length >= 3){\r\n            result.isRemove = true;\r\n            result.queue = waitQueue;\r\n        }else{\r\n            result.isRemove = false;\r\n            result.queue = [];\r\n        }\r\n        return result;\r\n\r\n    },\r\n    /**\r\n     * 依据带消除队列里的长度进行计算分数\r\n     * @param  {待消除队列的长度} waitQueueLength\r\n     */\r\n    addScore : function(waitQueueLength){\r\n        var scoreLabel = this.scoreLabel.getComponent(cc.Label);\r\n        switch(waitQueueLength){\r\n            case 3:\r\n                this.score += 30;\r\n                break;\r\n            case 4:\r\n                this.score += 40;\r\n                break;\r\n            case 5:\r\n                this.score += 50;\r\n                break;\r\n            case 6:\r\n                this.score += 60;\r\n                break;\r\n            case 7:\r\n                this.score += 70;\r\n                break;\r\n            case 8:\r\n                this.score += 80;\r\n                break;\r\n            case 9:\r\n                this.score += 90;\r\n                break;                        \r\n        }\r\n        //显示分数\r\n        scoreLabel.string = this.score;\r\n    },\r\n    //消除操作，先播放消除动画删除相应节点，上面的节点依次下落\r\n    /**\r\n     * @param  {待消除队列} waitQueue\r\n     * @param  {消除次数} removeTime\r\n     */\r\n    remove : function(waitQueue,removeTime){\r\n        //播放消除音效\r\n        this.playAudio(this.removeAudio);\r\n        //先不删除这些节点等找到所有这些待消节点上方的节点之后删除他们\r\n        //找到这几个待消节点上面的所有节点让他们自动执行下落动作（节点所挂的消除下落方法）\r\n        var scoreLabel = this.scoreLabel.getComponent(cc.Label);\r\n        removeTime++;\r\n        this.totalRemoveTime++;\r\n        this.totalTime++;\r\n        if(removeTime >= 2){\r\n            if(removeTime === 2){\r\n                //产生一次连击\r\n                this.score += 10;\r\n            }else if(removeTime === 3){\r\n                //产生两次连击\r\n                this.score += 20;\r\n            }else if(removeTime === 4){\r\n                //产生3次连击\r\n                this.score += 30;\r\n            }else if(removeTime === 5){\r\n                //产生4次连击\r\n                this.score += 40;\r\n            }\r\n            scoreLabel.string = this.score;\r\n        }\r\n        var waitDownArr = [];\r\n        for(let m = 0;m<waitQueue.length;m++){\r\n            var cRow = waitQueue[m].getComponent(\"Figure\").row;\r\n            var cCol = waitQueue[m].getComponent(\"Figure\").col;\r\n            this.upFindNodes(cRow,cCol,waitDownArr);\r\n        }\r\n        cc.log(\"待下落节点数组为：\" + waitDownArr);\r\n        //得到激活之后的节点\r\n        var activeNode = this.deleteNodeFromParent(waitQueue);\r\n        \r\n        // if(!waitDownArr.contain(activeNode))\r\n        //     waitDownArr.push(activeNode);\r\n        //下落其他节点\r\n        for(let j = 0;j<waitDownArr.length;j++){\r\n             waitDownArr[j].getComponent(\"Figure\").afterRemoveDown(this.map,this.backGroundArr,false);\r\n        }\r\n        if(activeNode.length > 0){\r\n            for(let i = 0;i<activeNode.length;i++){\r\n                if(!waitDownArr.contain(activeNode[i])){\r\n                    //将该激活节点加入到下降节点队列里检测是否可以再次消除\r\n                    waitDownArr.push(activeNode[i]);\r\n                }\r\n            }\r\n        }\r\n        //检测下降的节点数组看看是否可以再次消除\r\n        //0.5秒后检测下落的节点数组，为了防止下落块还没有执行action完又来了个action这样moveTo方法会出现错误\r\n        //连消检测\r\n        this.scheduleOnce(function(){\r\n            this.checkNodeArr(waitDownArr,removeTime);\r\n        },0.3);\r\n        \r\n    },\r\n    /**\r\n     * @param  {待消除队列} waitQueue\r\n     */\r\n    deleteNodeFromParent : function(waitQueue){\r\n        var activeNodeArr = [];\r\n        for(let i = 0;i<waitQueue.length;i++){\r\n            var row = waitQueue[i].getComponent(\"Figure\").row;\r\n            var col = waitQueue[i].getComponent(\"Figure\").col;\r\n            // var upNodes = this.upFindNodes(row,col);\r\n            //检查待消除方格的周围有没有封印的方格小块\r\n            this.checkHasSealBlock(row,col,activeNodeArr);\r\n            //恢复地图信息\r\n            this.map[row][col] = 0;\r\n            //恢复背景方格的原始属性\r\n            this.backGroundArr[row][col].getComponent(\"Back\").type = -1;\r\n            this.backGroundArr[row][col].getComponent(\"Back\").innerNode = null;\r\n            waitQueue[i].getComponent(\"Figure\").shine();\r\n            \r\n        }\r\n        //返回激活队列\r\n        return activeNodeArr;\r\n        // if(activeNodeArr.length > 0){\r\n        //     //检查激活过的节点是否存在消除的可能\r\n        //     this.checkNodeArr(activeNodeArr);\r\n        // }\r\n    },\r\n    //查看一个节点周围有没有封印的画像方块\r\n    /**\r\n     * @param  {该节点所处的行} row\r\n     * @param  {该节点所处的列} col\r\n     * @param  {激活节点数组} activeNodeArr\r\n     */\r\n    checkHasSealBlock : function(row,col,activeNodeArr){\r\n        //四个方向的位置\r\n        var directionArr = [[row-1,col],[row+1,col],[row,col-1],[row,col+1]];\r\n        for(let m = 0;m<directionArr.length;m++){\r\n            var crow = directionArr[m][0];\r\n            var ccol = directionArr[m][1];\r\n            //如果行或者列超出了边界位置就继续下一个方向数组对应的行和列\r\n            if(crow > 11 || crow < 0 || ccol > 5 || ccol < 0){\r\n                continue;\r\n            }else{\r\n                var node = this.backGroundArr[crow][ccol].getComponent(\"Back\").innerNode;\r\n                if(node === null){\r\n                    continue;\r\n                }\r\n                //如果是待消除的方块的话就跳过该节点\r\n                if(node.getComponent(\"Figure\").isRemove === true){\r\n                    continue;\r\n                }\r\n                var nodeType = this.backGroundArr[crow][ccol].getComponent(\"Back\").type;\r\n                if(nodeType >= 4 && nodeType <= 7){\r\n                    // var nodeName = Number(node.name);\r\n                    //证明该行该列存在封印的画像动态加载图片\r\n                    cc.log(\"nodeType is \" + nodeType);\r\n                    var anim = node.getComponent(cc.Animation);\r\n                    //激活状态设置为true\r\n                    node.getComponent(\"Figure\").isActive = true;\r\n                    if(!activeNodeArr.contain(node)){\r\n                        //将该激活节点加入到激活队列里\r\n                        activeNodeArr.push(node);\r\n                    }\r\n                    if(nodeType === 4){\r\n                        for(let j = 0;j<node.childrenCount;j++){\r\n                            node.children[j].x = 0;\r\n                            node.children[j].active = true;\r\n                        }\r\n                        anim.play(\"game_yellow_stone_unlock\");\r\n                        //改变背景方格的对应的状态类型\r\n                        this.backGroundArr[crow][ccol].getComponent(\"Back\").type = 0;\r\n                        //设置该节点的类型为0\r\n                        node.getComponent(\"Figure\").type = 0;\r\n                        node.name = \"7\";\r\n                    }else if(nodeType === 5){\r\n                        for(let j = 0;j<node.childrenCount;j++){\r\n                            node.children[j].x = 0;\r\n                            node.children[j].active = true;\r\n                        }\r\n                        anim.play(\"game_yellow_stone_unlock\");\r\n                        this.backGroundArr[crow][ccol].getComponent(\"Back\").type = 1;\r\n                        node.getComponent(\"Figure\").type = 1;\r\n                        node.name = \"8\";\r\n                    }else if(nodeType === 6){\r\n                        for(let j = 0;j<node.childrenCount;j++){\r\n                            node.children[j].x = 0;\r\n                            node.children[j].active = true;\r\n                        }\r\n                        anim.play(\"game_yellow_stone_unlock\");\r\n                        this.backGroundArr[crow][ccol].getComponent(\"Back\").type = 2;\r\n                        node.getComponent(\"Figure\").type = 2;\r\n                        node.name = \"9\";\r\n                    }else if(nodeType === 7){\r\n                        for(let j = 0;j<node.childrenCount;j++){\r\n                            node.children[j].x = 0;\r\n                            node.children[j].active = true;\r\n                        }\r\n                        anim.play(\"game_yellow_stone_unlock\");\r\n                        this.backGroundArr[crow][ccol].getComponent(\"Back\").type = 3;\r\n                        node.getComponent(\"Figure\").type = 3;\r\n                        node.name = \"10\";\r\n                    }  \r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n    //动态修改图片的spriteFrame\r\n    /**\r\n     * @param  {节点的名字} nodeName\r\n     * @param  {待修改节点} node\r\n     */\r\n    dynamicLoad : function(nodeName,node){\r\n        nodeName = Number(nodeName);\r\n        function callback(err,spriteFrame){\r\n            if(err){\r\n                console.log(err);\r\n            }\r\n            node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            //加载完之后修改精灵的名字\r\n            cc.log(\"设置\");\r\n        }\r\n        (function test(callback){\r\n            cc.loader.loadRes(\"Game4/\" + nodeName-4,cc.SpriteFrame,callback);\r\n        })(callback.bind(this));\r\n    },\r\n    \r\n    //向上找节点\r\n    upFindNodes : function(row,col,arr){\r\n        if(arguments.length === 2){\r\n            var tempArr = [];\r\n        }\r\n        while(row > 0){\r\n            row--;\r\n            var upNode = this.backGroundArr[row][col].getComponent(\"Back\").innerNode;\r\n            if(upNode != null){\r\n                if(upNode.getComponent(\"Figure\").isRemove === true){\r\n                    continue;\r\n                }else{\r\n                    if(arguments.length === 3){\r\n                        //将不是待消节点添加到数组中去\r\n                        if(!arr.contain(upNode)){    \r\n                            //如果该数组中还没有该节点的话就加进去\r\n                            arr.push(upNode);\r\n                        }\r\n                    }else{\r\n                        if(!tempArr.contain(upNode))\r\n                            tempArr.push(upNode);\r\n                    }\r\n                }\r\n            }else{\r\n                //如果upNode是空的话\r\n                break;\r\n            }\r\n        }\r\n        if(arguments.length === 2){\r\n            return tempArr;\r\n        }\r\n    },\r\n   //\r\n   /**\r\n    * 递归查找该节点上下左右四个方向是否有跟自己的类型相同的节点\r\n    * @param  {待检测节点} node\r\n    * @param  {待检测节点所在的行} row\r\n    * @param  {待检测节点所在的列} col\r\n    * @param  {待检测节点的类型} type\r\n    * @param  {待消除队列} arr\r\n    */\r\n   find : function(node,row,col,type,arr){\r\n       //定义上下左右四个方向数组\r\n       var round = [[row-1,col],[row+1,col],[row,col-1],[row,col+1]];\r\n       if(!arr.contain(node)){\r\n           //如果当前数组中不包含该节点就加入数组\r\n           arr.push(node);\r\n       }\r\n       for(let i =0;i < round.length;i++){\r\n           //如果计算的行或者列超出了边界继续下一个行列\r\n           if(round[i][0] < 0 || round[i][0] >11 || round[i][1] > 5 || round[i][1] < 0){\r\n               continue;\r\n           }\r\n           var checkType = this.backGroundArr[round[i][0]][round[i][1]].getComponent(\"Back\").type;\r\n           if(checkType === type && checkType < 4 && checkType >= 0){\r\n                var waitDeleteNode = this.backGroundArr[round[i][0]][round[i][1]].getComponent(\"Back\").innerNode;\r\n                if(!arr.contain(waitDeleteNode)){\r\n                    arr.push(waitDeleteNode);\r\n                    //递归寻找节点\r\n                    this.find(waitDeleteNode,round[i][0],round[i][1],type,arr);\r\n                }\r\n           }\r\n       }\r\n   },\r\n   //方块下落方法\r\n   down : function(nodeArr){\r\n        //位移3个方格\r\n        for(var i = nodeArr.length-1;i >= 0;i--){\r\n            var row = this.getRow(nodeArr[i]);\r\n            var col = this.getColumn(nodeArr[i]);\r\n            nodeArr[i].y = this.backGroundArr[row+1][col].y; \r\n            nodeArr[i].getComponent(\"Figure\").row = row+1;\r\n        }\r\n    },\r\n    //将这两个预制体的坐标数值保留两位小数\r\n    remainTwoNumber : function(nodeArr){\r\n        for(let k = 0;k<nodeArr.length;k++){\r\n            //将所有的坐标变成只保留两位小数的数字\r\n            nodeArr[k].x = Number(nodeArr[k].x.toFixed(2));\r\n            nodeArr[k].y = Number(nodeArr[k].y.toFixed(2));\r\n        }\r\n    },\r\n    //旋转方法\r\n    rotate : function(){\r\n        if(!this.gameOver){\r\n            //记录下旋转的位置\r\n            // this.unscheduleAllCallbacks();\r\n            if(this.isCreateOver){\r\n                this.playAudio(this.clickAudio);\r\n                this.rotateButton.children[0].opacity = 120;\r\n                var self = this;\r\n                //旋转中心\r\n                var x0 = this.nodeArr[1].x;\r\n                var y0 = this.nodeArr[1].y;\r\n                var x0Row = this.getRow(this.nodeArr[1]);\r\n                var x0Col = this.getColumn(this.nodeArr[1]);\r\n        \r\n                // var rotateArr = [[x0Row-1,x0Col],[x0Row,x0Col+1],[x0Row+1,x0Col],[x0Row,x0Col-1 ]];\r\n                //旋转0度对应的坐标\r\n                var x = this.nodeArr[0].x;\r\n                var y = this.nodeArr[0].y;\r\n                \r\n                //旋转45度对应的坐标\r\n                var rotate45X = (x-x0)*Math.cos(-Math.PI/4)-(y-y0)*Math.sin(-Math.PI/4) + x0;\r\n                var rotate45Y = (x-x0)*Math.sin(-Math.PI/4)+(y-y0)*Math.cos(-Math.PI/4) + y0;\r\n                //节点的旋转状态\r\n                var nodeAngle = this.nodeArr[0].getComponent(\"Figure\").angle;\r\n                var canAction = false;\r\n                if(nodeAngle === 0){\r\n                    //边界旋转\r\n                    if(x0Col === 5){\r\n                        //改变旋转中心进行旋转内部进行判断是否可以旋转\r\n                        this.changeRotateCenter(nodeAngle,x0Col);\r\n                    }else{\r\n                        if(this.checkIsRotate(x0Row,x0Col,nodeAngle)){\r\n                            //旋转90度对应的坐标位置\r\n                            var bezier = this.dealRotate(nodeAngle,x0Row,x0Col,rotate45X,rotate45Y,x,y,1);\r\n                            //能够旋转\r\n                            canAction = true;\r\n                        }\r\n                    }\r\n                    \r\n                }else if(nodeAngle === 1){\r\n                    if(this.checkIsRotate(x0Row,x0Col,nodeAngle)){\r\n                        var bezier = this.dealRotate(nodeAngle,x0Row,x0Col,rotate45X,rotate45Y,x,y,2);\r\n                        canAction = true;\r\n                    }\r\n                }else if(nodeAngle === 2){\r\n                    //边界旋转判断改为顺时针旋转（以#0块为旋转中心）\r\n                    if(x0Col === 0){\r\n                    this.changeRotateCenter(nodeAngle,x0Col);\r\n                    }else{\r\n                        if(this.checkIsRotate(x0Row,x0Col,nodeAngle)){\r\n                            var bezier = this.dealRotate(nodeAngle,x0Row,x0Col,rotate45X,rotate45Y,x,y,3);\r\n                            canAction = true;\r\n                        }\r\n                    }\r\n                }else if(nodeAngle === 3){\r\n                    if(this.checkIsRotate(x0Row,x0Col,nodeAngle)){\r\n                        //创建贝塞尔曲线所对应的最少坐标\r\n                        var bezier = this.dealRotate(nodeAngle,x0Row,x0Col,rotate45X,rotate45Y,x,y,0);\r\n                        canAction = true;\r\n                    }\r\n                }\r\n                if(canAction){\r\n                    (function test(cb){\r\n                        var bezierAction = cc.bezierTo(0.008,bezier);\r\n                        self.nodeArr[0].runAction(bezierAction);\r\n                        cb()\r\n                    })(pro);\r\n                    function pro() {\r\n                        cc.log(\"承诺正常执行########\");\r\n                        cc.log(\"@@@@@@@@@@\" + self.nodeArr[0].getComponent(\"Figure\").row);\r\n                        cc.log(\"@@@@@@@@@@\" + self.nodeArr[0].getComponent(\"Figure\").col);\r\n                    }\r\n                    cc.log(\"结束旋转动作!!!!!\");\r\n                }\r\n            }\r\n            this.scheduleOnce(function(){\r\n                this.rotateButton.children[0].opacity = 0;\r\n            },0.5);\r\n        }\r\n    },\r\n    //处理旋转\r\n    /**\r\n     * @param  {当前需要旋转的节点的角度代码属性} angle\r\n     * @param  {旋转中心所在的行} row\r\n     * @param  {选装中心所在的列} col\r\n     * @param  {旋转45度对应的x坐标} rotate45X\r\n     * @param  {旋转45度对应的y坐标} rotate45Y\r\n     * @param  {旋转之前的x坐标} x\r\n     * @param  {旋转之前对应的y坐标} y\r\n     * @param  {旋转之后该节点对应的角度属性代号} angleCode\r\n     */\r\n    dealRotate : function(angle,row,col,rotate45X,rotate45Y,x,y,angleCode){\r\n        if(angle === 0){\r\n            var rotate90X = this.backGroundArr[row][col+1].x;\r\n            var rotate90Y = this.backGroundArr[row][col+1].y;\r\n            this.nodeArr[0].getComponent(\"Figure\").row = row;\r\n            this.nodeArr[0].getComponent(\"Figure\").col = col+1;  \r\n        }else if(angle === 1){\r\n            var rotate90X = this.backGroundArr[row+1][col].x;\r\n            var rotate90Y = this.backGroundArr[row+1][col].y;  \r\n            this.nodeArr[0].getComponent(\"Figure\").row = row+1;\r\n            this.nodeArr[0].getComponent(\"Figure\").col = col;  \r\n        }else if(angle === 2){\r\n            var rotate90X = this.backGroundArr[row][col-1].x;\r\n            var rotate90Y = this.backGroundArr[row][col-1].y;\r\n            this.nodeArr[0].getComponent(\"Figure\").row = row;\r\n            this.nodeArr[0].getComponent(\"Figure\").col = col-1;   \r\n        }else if(angle === 3){\r\n            var rotate90X = this.backGroundArr[row-1][col].x;\r\n            var rotate90Y = this.backGroundArr[row-1][col].y;\r\n            this.nodeArr[0].getComponent(\"Figure\").row = row-1;\r\n            this.nodeArr[0].getComponent(\"Figure\").col = col;    \r\n        }\r\n         \r\n        //创建贝塞尔曲线所对应的最少坐标\r\n        var bezier = [cc.p(x,y),cc.p(rotate45X,rotate45Y),cc.p(rotate90X,rotate90Y)];\r\n        // //初始向量\r\n        // var startV = cc.v2(x,y).sub(cc.v2(x0,y0));\r\n        // var result = startV.rotate(Math.PI/2);\r\n        this.nodeArr[0].x = rotate90X;\r\n        this.nodeArr[0].y = rotate90Y;\r\n        //旋转之后变成相应的角度\r\n        this.nodeArr[0].getComponent(\"Figure\").angle = angleCode;\r\n        return bezier;\r\n    },\r\n    //变换旋转中心\r\n    changeRotateCenter : function(nodeAngle,col){\r\n        var canRotate = false;\r\n        var self = this;\r\n        var x00 = this.nodeArr[0].x;\r\n        var y00 = this.nodeArr[0].y;\r\n        var x00Row = this.getRow(this.nodeArr[0]);\r\n        var x00Col = this.getColumn(this.nodeArr[0]);\r\n\r\n        var xx = this.nodeArr[1].x;\r\n        var yy = this.nodeArr[1].y;\r\n\r\n        //旋转45度方向\r\n        var rotate45Xc = (xx-x00)*Math.cos(-Math.PI/4)-(yy-y00)*Math.sin(-Math.PI/4) + x00;\r\n        var rotate45Yc = (xx-x00)*Math.sin(-Math.PI/4)+(yy-y00)*Math.cos(-Math.PI/4) + y00;\r\n        if(nodeAngle === 0 && col === 5){\r\n            //检查是否可以旋转\r\n            if(this.checkIsRotateByRotateCenter(x00Row,x00Col,nodeAngle)){\r\n                var rotate90X = this.backGroundArr[x00Row][x00Col-1].x;\r\n                var rotate90Y = this.backGroundArr[x00Row][x00Col-1].y;\r\n                this.nodeArr[1].getComponent(\"Figure\").row = x00Row;\r\n                this.nodeArr[1].getComponent(\"Figure\").col = x00Col-1;   \r\n                canRotate = true;\r\n            }\r\n           \r\n        }else if(nodeAngle === 2 && col === 0){\r\n            if(this.checkIsRotateByRotateCenter(x00Row,x00Col,nodeAngle)){\r\n                var rotate90X = this.backGroundArr[x00Row][x00Col+1].x;\r\n                var rotate90Y = this.backGroundArr[x00Row][x00Col+1].y;   \r\n                this.nodeArr[1].getComponent(\"Figure\").row = x00Row;\r\n                this.nodeArr[1].getComponent(\"Figure\").col = x00Col+1;   \r\n                canRotate = true;\r\n            }\r\n            \r\n        }\r\n        //如果能旋转的话就进行执行贝塞尔曲线\r\n        if(canRotate){\r\n            //创建贝塞尔曲线所对应的最少坐标\r\n            var bezier = [cc.p(xx,yy),cc.p(rotate45Xc,rotate45Yc),cc.p(rotate90X,rotate90Y)];\r\n            // //初始向量\r\n            this.nodeArr[1].x = rotate90X;\r\n            this.nodeArr[1].y = rotate90Y;\r\n            //旋转之后变成270度\r\n            if(nodeAngle === 2 && col === 0){\r\n                this.nodeArr[0].getComponent(\"Figure\").angle = 3;\r\n            }else if(nodeAngle === 0 && col === 5){\r\n                this.nodeArr[0].getComponent(\"Figure\").angle = 1;\r\n            }\r\n            //执行贝塞尔曲线动作\r\n            (function test(cb){\r\n                \r\n                var bezierAction = cc.bezierTo(0.008,bezier);\r\n                self.nodeArr[1].runAction(bezierAction);\r\n                cb()\r\n            })(pro.bind(self));\r\n            function pro() {\r\n                cc.log(\"承诺正常执行########\");\r\n                cc.log(\"@@@@@@@@@@\" + self.nodeArr[0].getComponent(\"Figure\").row);\r\n                cc.log(\"@@@@@@@@@@\" + self.nodeArr[0].getComponent(\"Figure\").col);\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 检查以0号数组元素为旋转中心检查是否可以旋转\r\n     * @param  {以零号数组节点所在的行} centerRow\r\n     * @param  {以零号数组节点所在的列} centerCol\r\n     * @param  {以零号数组节点所在的角度} angle\r\n     */\r\n    checkIsRotateByRotateCenter : function(centerRow,centerCol,angle){\r\n        if(angle === 2 && centerCol === 0){\r\n            if(this.map[centerRow-1][centerCol+1] != 1 && this.map[centerRow][centerCol+1] != 1){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        }else if(angle === 0 && centerCol === 5){\r\n            if(this.map[centerRow+1][centerCol-1] != 1 && this.map[centerRow][centerCol-1] != 1){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n    //检查是否可以旋转\r\n    /**\r\n     * @param  {旋转中心节点所在的行} centerRow\r\n     * @param  {旋转中心节点所在的列} centerCol\r\n     * @param  {待旋转节点的角度属性} angle\r\n     */\r\n    checkIsRotate : function(centerRow,centerCol,angle){\r\n            //四个方向\r\n            //如果当前方向是0的话就看看一方向对应的背景方格的状态是什么\r\n            if(angle === 0){\r\n                //检查旋转中心节点的右边背景方格的状态是否为1和检查#0块右边对应的背景方格是否为1\r\n                if(this.map[centerRow-1][centerCol+1] != 1 && this.map[centerRow][centerCol+1] != 1){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }else if(angle === 1){\r\n                if(this.map[centerRow+1][centerCol+1] != 1 && this.map[centerRow+1][centerCol] != 1){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }else if(angle === 2){\r\n                if(this.map[centerRow+1][centerCol-1] != 1 && this.map[centerRow][centerCol-1] != 1){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }else if(angle === 3){\r\n                if(this.map[centerRow-1][centerCol-1] != 1 && this.map[centerRow-1][centerCol] != 1){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n    },\r\n     //左移方法\r\n     moveLeft    : function(){\r\n        if(!this.gameOver){\r\n            this.remainTwoNumber(this.nodeArr);\r\n            if(this.CheckIsLeft()){\r\n                for(var i = 0;i < this.nodeArr.length;i++){\r\n                    this.leftMove(this.nodeArr[i]);\r\n                    cc.log(this.getColumn(this.nodeArr[i]));\r\n                }\r\n            }\r\n        }\r\n    },\r\n    leftMove : function(node){\r\n        var row = this.getRow(node);\r\n        var col = this.getColumn(node);\r\n        //将当前背景节点的node改为null\r\n        // this.backGroundArr[row][col].node = null;\r\n        node.x = this.backGroundArr[row][col-1].x;\r\n        node.getComponent(\"Figure\").row = row;\r\n        node.getComponent(\"Figure\").col = col-1;\r\n    },\r\n   //右移方法\r\n   moveRight   : function(){\r\n       if(!this.gameOver){\r\n           this.remainTwoNumber(this.nodeArr);\r\n           if(this.CheckIsRight()){\r\n               for(var i = 0;i < this.nodeArr.length;i++){\r\n                   this.rightMove(this.nodeArr[i]);\r\n                }\r\n            } \r\n        }\r\n    },\r\n    rightMove : function(node){\r\n        var row = this.getRow(node);\r\n        var col = this.getColumn(node);\r\n        //将当前背景节点的node改为null\r\n        node.x = this.backGroundArr[row][col+1].x;\r\n        node.getComponent(\"Figure\").row = row;\r\n        node.getComponent(\"Figure\").col = col+1;\r\n    },\r\n    /**\r\n        检测是否可以向下移动\r\n        返回true或者false\r\n        @return true  : 可以下落\r\n        @return false : 不可以下落\r\n    **/\r\n    /**\r\n     * @param  {待检测的节点数组} nodeArr\r\n     */\r\n    CheckIsDown : function(nodeArr){\r\n        if(nodeArr.length != 0){\r\n            //将坐标值转换为小数点两位小数\r\n            this.remainTwoNumber(nodeArr);\r\n            //如果#0块的属性angle为零的时候，只判断#1块下面是否为1，为1不下落，为地面不下落\r\n            if(nodeArr[0].getComponent(\"Figure\").angle === 0){\r\n                return this.checkIsBottom(nodeArr[1],0);\r\n            }else if(nodeArr[0].getComponent(\"Figure\").angle === 1 || nodeArr[0].getComponent(\"Figure\").angle === 3){\r\n                //横条的形状的时候会出现有一个下落的情况\r\n                if(this.checkDown(nodeArr) && !(this.checkDown(nodeArr) instanceof cc.Node)){\r\n                    return true;\r\n                }else if(!this.checkDown(nodeArr) && !(this.checkDown(nodeArr) instanceof cc.Node)){\r\n                    return false;\r\n                }else if(this.checkDown(nodeArr) instanceof cc.Node){\r\n                    var targetNode = this.checkDown(nodeArr);\r\n                    //找出这个下面背景方格状态为0的节点\r\n                    var targetRow = this.findTheNodeDown(targetNode);\r\n                    var col = this.getColumn(targetNode);\r\n                    //单独下落这个节点\r\n                    targetNode.getComponent(\"Figure\").quickDown(targetRow,col,this.backGroundArr,this.map,false);\r\n                    return false;\r\n                }\r\n            }else if(nodeArr[0].getComponent(\"Figure\").angle === 2){\r\n                return this.checkIsBottom(nodeArr[0],2);\r\n            }\r\n        }\r\n    },\r\n    \r\n    /**\r\n     * @param  {需要向下搜索背景方格的状态的初始节点} node\r\n     */\r\n    findTheNodeDown : function(node){\r\n         //获得当前节点的行和列\r\n         var row = this.getRow(node);\r\n         var col = this.getColumn(node);\r\n         //向下寻找\r\n         while(row < 11){\r\n            row++;\r\n            if(this.map[row][col] === 1){\r\n                break;\r\n            }\r\n            if(row === 11){\r\n                break;\r\n            }\r\n         }\r\n         //最底下的背景方格的状态不为1\r\n         if(row === 11 && this.map[row][col] != 1){\r\n             return 11;\r\n         }else{\r\n            return row-1;\r\n         }\r\n         \r\n    },\r\n    //判断横条的情况\r\n    checkDown : function(nodeArr){\r\n        this.remainTwoNumber(nodeArr);\r\n        var count1 = 0;\r\n        var count0 = 0;\r\n        var nodeDownIsZero = [];\r\n        //如果是第11行就放回false\r\n        if(this.getRow(nodeArr[0]) === 11){\r\n            return false;\r\n        }\r\n        for(let m = 0;m < nodeArr.length;m++){\r\n            var row = this.getRow(nodeArr[m]);\r\n            var col = this.getColumn(nodeArr[m]);\r\n            if(this.map[row+1][col] === 1){\r\n                count1++;\r\n            }else if(this.map[row+1][col] ===0){\r\n                count0++;\r\n                nodeDownIsZero.push(nodeArr[m]);\r\n            }\r\n        }\r\n        if(count1 === 2){\r\n            //如果两个块的下面都为1的话不可以下落\r\n            return false;\r\n        }else if(count0 === 2){\r\n            //如果两个块的下面都为0的话是可以下落的\r\n            return true;\r\n        }else{\r\n            if(nodeDownIsZero.length > 0 && nodeDownIsZero.length === 1){\r\n                return nodeDownIsZero[0];\r\n            }\r\n        }\r\n        \r\n\r\n    },\r\n    // },\r\n    //判断是否触底或者是下面还有方块\r\n    /**\r\n     * @param  {待检测的节点} node\r\n     */\r\n    checkIsBottom : function(node,angle){\r\n        // if(angle === 0 || angle === 2){\r\n            var row = this.getRow(node);\r\n            var col = this.getColumn(node);\r\n            if(row != 11){\r\n                //下一行背景方格的状态是否为1\r\n                if(this.map[row + 1][col] === 1){\r\n                    //将对应的背景方格的状态改为1\r\n                    return false;\r\n                }else{\r\n                    return true;\r\n                }\r\n            }else{\r\n                return false;\r\n            }\r\n    },\r\n    /**\r\n       检测是否可以向左移动\r\n    **/\r\n   CheckIsLeft : function(){\r\n        //如果两个形状还没有完全落下来不能左移右移\r\n        if(this.nodeArr[0].y > this.nodeHeight/2){\r\n                return false;\r\n        }\r\n        this.remainTwoNumber(this.nodeArr);\r\n        var xArr = [];\r\n        var rowArr = [];\r\n        var colArr = [];\r\n        for(let i = 0;i< this.nodeArr.length;i++){\r\n            xArr.push(this.nodeArr[i].x);\r\n            rowArr.push(this.getRow(this.nodeArr[i]));\r\n            colArr.push(this.getColumn(this.nodeArr[i]));\r\n        }\r\n        var minX = Math.min.apply(Math,xArr);\r\n        cc.log(\"minX is \" + minX);\r\n        //找到最小列\r\n        var col = this.chooseColumnByLocation(minX);\r\n        if(xArr.length > 0){\r\n            if(xArr[0] === xArr[xArr.length-1]){\r\n                if(col === 0){\r\n                    return false;\r\n                }\r\n                //说明是同一列\r\n                //找出x坐标最小的左边看看它的坐标地图状态值是多少\r\n                if(this.map[rowArr[0]][col-1] === 0 && this.map[rowArr[1]][col-1] === 0){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n\r\n            }else{\r\n                //同一行\r\n                if(this.map[rowArr[0]][col-1] === 0){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //检测是否可以向右移动\r\n    CheckIsRight : function(){\r\n          //如果两个形状还没有完全落下来不能左移右移\r\n        if(this.nodeArr[0].y > this.nodeHeight/2){\r\n            return false;\r\n        }\r\n        var xArr = [];\r\n        var rowArr = [];\r\n        var colArr = [];\r\n        this.remainTwoNumber(this.nodeArr);\r\n        for(let i = 0;i< this.nodeArr.length;i++){\r\n            xArr.push(this.nodeArr[i].x);\r\n            rowArr.push(this.getRow(this.nodeArr[i]));\r\n            colArr.push(this.getColumn(this.nodeArr[i]));\r\n        }\r\n        var maxX = Math.max.apply(Math,xArr);\r\n        cc.log(\"maxX is \" + maxX);\r\n        //找到最大列\r\n        var col = this.chooseColumnByLocation(maxX);\r\n        if(xArr.length > 0){\r\n            if(xArr[0] === xArr[xArr.length-1]){\r\n                if(col === 5){\r\n                    return false;\r\n                }\r\n                //说明是同一列\r\n                //找出x坐标最小的左边看看它的坐标地图状态值是多少\r\n                if(this.map[rowArr[0]][col+1] === 0 && this.map[rowArr[1]][col+1] === 0){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }else{\r\n                //同一行\r\n                if(this.map[rowArr[0]][col+1] === 0){\r\n                    //如果最大行右边的背景方格的状态是0的话就可以移动\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //暂停游戏\r\n    pause : function(){\r\n        if(!this.gameOver){\r\n            //暂停游戏\r\n            cc.director.pause();\r\n            console.log(\"game3 is \" + game3);\r\n            console.log(\"暂停游戏开始！！！！\");\r\n            this.mask.active = true;\r\n            this.pauseMenu.active = true;\r\n        }\r\n    },\r\n    //播放音效方法\r\n    playAudio : function(audioUrl){\r\n        cc.audioEngine.play(audioUrl,false,1);\r\n    },\r\n    screenAdapt : function(){\r\n        //获得当前屏幕的宽度\r\n        let currentWidth = cc.director.getWinSize();\r\n        //获得屏幕的宽度\r\n        let winWidth = cc.view.getFrameSize();\r\n        console.log(\"视图宽度是\",winWidth);\r\n        console.log(\"屏幕的宽度是\",currentWidth);\r\n    },\r\n});\r\n"]}